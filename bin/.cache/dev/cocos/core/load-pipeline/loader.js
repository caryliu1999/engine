(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "../utils/js.js", "../assets/image-asset.js", "./plist-parser.js", "./pipeline.js", "./uuid-loader.js", "./font-loader.js", "../global-exports.js", "../assets/asset-enum.js"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("../utils/js.js"), require("../assets/image-asset.js"), require("./plist-parser.js"), require("./pipeline.js"), require("./uuid-loader.js"), require("./font-loader.js"), require("../global-exports.js"), require("../assets/asset-enum.js"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.js, global.imageAsset, global.plistParser, global.pipeline, global.uuidLoader, global.fontLoader, global.globalExports, global.assetEnum);
    global.loader = mod.exports;
  }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports, _js, _imageAsset, _plistParser, _pipeline, _uuidLoader, _fontLoader, _globalExports, _assetEnum) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.default = void 0;
  _plistParser = _interopRequireDefault(_plistParser);

  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  function loadNothing() {
    return null;
  }

  function loadJSON(item) {
    if (typeof item.content !== 'string') {
      return new Error('JSON Loader: Input item doesn\'t contain string content');
    }

    try {
      var result = JSON.parse(item.content);
      return result;
    } catch (e) {
      return new Error('JSON Loader: Parse json [' + item.id + '] failed : ' + e);
    }
  }

  function loadImage(item) {
    var loadByDeserializedAsset = item._owner instanceof _globalExports.legacyCC.Asset;

    if (loadByDeserializedAsset) {
      // already has cc.Asset
      return null;
    }

    var image = item.content;

    if (_globalExports.legacyCC.sys.platform !== _globalExports.legacyCC.sys.FB_PLAYABLE_ADS && !(image instanceof Image)) {
      return new Error('Image Loader: Input item doesn\'t contain Image content');
    } // load cc.ImageAsset


    var rawUrl = item.rawUrl;
    var imageAsset = item.imageAsset || new _imageAsset.ImageAsset();
    imageAsset._uuid = item.uuid;
    imageAsset._url = rawUrl;

    imageAsset._setRawAsset(rawUrl, false);

    imageAsset._nativeAsset = image;
    return imageAsset;
  } // If audio is loaded by url directly, than this loader will wrap it into a new cc.AudioClip object.
  // If audio is loaded by deserialized AudioClip, than this loader will be skipped.


  function loadAudioAsAsset(item, callback) {
    var loadByDeserializedAsset = item._owner instanceof _globalExports.legacyCC.Asset;

    if (loadByDeserializedAsset) {
      // already has cc.Asset
      return null;
    }

    var audioClip = new _globalExports.legacyCC.AudioClip();

    audioClip._setRawAsset(item.rawUrl, false);

    audioClip._nativeAsset = item.content;
    return audioClip;
  }

  function loadVideoAsAsset(item, callback) {
    var loadByDeserializedAsset = item._owner instanceof _globalExports.legacyCC.Asset;

    if (loadByDeserializedAsset) {
      // already has cc.Asset
      return null;
    }

    var videoClip = new _globalExports.legacyCC.VideoClip();

    videoClip._setRawAsset(item.rawUrl, false);

    videoClip._nativeAsset = item.content;
    return videoClip;
  }

  function loadPlist(item) {
    if (typeof item.content !== 'string') {
      return new Error('Plist Loader: Input item doesn\'t contain string content');
    }

    var result = _plistParser.default.parse(item.content);

    if (result) {
      return result;
    } else {
      return new Error('Plist Loader: Parse [' + item.id + '] failed');
    }
  }

  function loadBinary(item) {
    // Invoke custom handle
    if (item.load) {
      return item.load(item.content);
    } else {
      return item.content;
    }
  } //===============//
  // PVR constants //
  //===============//
  // https://github.com/toji/texture-tester/blob/master/js/webgl-texture-util.js#L424


  var PVR_HEADER_LENGTH = 13; // The header length in 32 bit ints.

  var PVR_MAGIC = 0x03525650; //0x50565203;
  // Offsets into the header array.

  var PVR_HEADER_MAGIC = 0;
  var PVR_HEADER_FORMAT = 2;
  var PVR_HEADER_HEIGHT = 6;
  var PVR_HEADER_WIDTH = 7;
  var PVR_HEADER_MIPMAPCOUNT = 11;
  var PVR_HEADER_METADATA = 12;

  function loadPVRTex(item) {
    var buffer = item.content instanceof ArrayBuffer ? item.content : item.content.buffer; // Get a view of the arrayBuffer that represents the DDS header.

    var header = new Int32Array(buffer, 0, PVR_HEADER_LENGTH); // Do some sanity checks to make sure this is a valid DDS file.

    if (header[PVR_HEADER_MAGIC] === PVR_MAGIC) {
      // Gather other basic metrics and a view of the raw the DXT data.
      var width = header[PVR_HEADER_WIDTH];
      var height = header[PVR_HEADER_HEIGHT];
      var dataOffset = header[PVR_HEADER_METADATA] + 52; // todo: use new Uint8Array(buffer, dataOffset) instead

      buffer = buffer.slice(dataOffset, buffer.byteLength);
      var pvrtcData = new Uint8Array(buffer);
      var pvrAsset = {
        _data: pvrtcData,
        _compressed: true,
        width: width,
        height: height
      };
      return pvrAsset;
    } else if (header[11] === 0x21525650) {
      var headerLength = header[0],
          _height = header[1],
          _width = header[2]; // todo: use new Uint8Array(buffer, headerLength) instead

      buffer = buffer.slice(headerLength, buffer.byteLength);

      var _pvrtcData = new Uint8Array(buffer);

      var _pvrAsset = {
        _data: _pvrtcData,
        _compressed: true,
        width: _width,
        height: _height
      };
      return _pvrAsset;
    } else {
      return new Error("Invalid magic number in PVR header");
    }
  } //===============//
  // ETC constants //
  //===============//


  var ETC_PKM_HEADER_SIZE = 16;
  var ETC_PKM_FORMAT_OFFSET = 6;
  var ETC_PKM_ENCODED_WIDTH_OFFSET = 8;
  var ETC_PKM_ENCODED_HEIGHT_OFFSET = 10;
  var ETC_PKM_WIDTH_OFFSET = 12;
  var ETC_PKM_HEIGHT_OFFSET = 14;
  var ETC1_RGB_NO_MIPMAPS = 0;
  var ETC2_RGB_NO_MIPMAPS = 1;
  var ETC2_RGBA_NO_MIPMAPS = 3;

  function readBEUint16(header, offset) {
    return header[offset] << 8 | header[offset + 1];
  }

  function loadPKMTex(item) {
    var buffer = item.content instanceof ArrayBuffer ? item.content : item.content.buffer;
    var header = new Uint8Array(buffer);
    var format = readBEUint16(header, ETC_PKM_FORMAT_OFFSET);

    if (format !== ETC1_RGB_NO_MIPMAPS && format !== ETC2_RGB_NO_MIPMAPS && format !== ETC2_RGBA_NO_MIPMAPS) {
      return new Error("Invalid magic number in ETC header");
    }

    var width = readBEUint16(header, ETC_PKM_WIDTH_OFFSET);
    var height = readBEUint16(header, ETC_PKM_HEIGHT_OFFSET);
    var encodedWidth = readBEUint16(header, ETC_PKM_ENCODED_WIDTH_OFFSET);
    var encodedHeight = readBEUint16(header, ETC_PKM_ENCODED_HEIGHT_OFFSET); // todo: use new Uint8Array(buffer, ETC_PKM_HEADER_SIZE) instead

    buffer = buffer.slice(ETC_PKM_HEADER_SIZE, buffer.byteLength);
    var etcData = new Uint8Array(buffer);
    var etcAsset = {
      _data: etcData,
      _compressed: true,
      width: width,
      height: height
    };
    return etcAsset;
  } //===============//
  // ASTC constants //
  //===============//
  // struct astc_header
  // {
  // 	uint8_t magic[4];
  // 	uint8_t blockdim_x;
  // 	uint8_t blockdim_y;
  // 	uint8_t blockdim_z;
  // 	uint8_t xsize[3];			// x-size = xsize[0] + xsize[1] + xsize[2]
  // 	uint8_t ysize[3];			// x-size, y-size and z-size are given in texels;
  // 	uint8_t zsize[3];			// block count is inferred
  // };


  var ASTC_MAGIC = 0x5CA1AB13;
  var ASTC_HEADER_LENGTH = 16; // The header length

  var ASTC_HEADER_MAGIC = 4;
  var ASTC_HEADER_BLOCKDIM = 3;
  var ASTC_HEADER_SIZE_X_BEGIN = 7;
  var ASTC_HEADER_SIZE_Y_BEGIN = 10;
  var ASTC_HEADER_SIZE_Z_BEGIN = 13;

  function loadASTCTex(item) {
    var buffer = item.content instanceof ArrayBuffer ? item.content : item.content.buffer;
    var header = new Uint8Array(buffer);
    var magicval = header[0] + (header[1] << 8) + (header[2] << 16) + (header[3] << 24);

    if (magicval !== ASTC_MAGIC) {
      return new Error('Invalid magic number in ASTC header');
    }

    var xdim = header[ASTC_HEADER_MAGIC];
    var ydim = header[ASTC_HEADER_MAGIC + 1];
    var zdim = header[ASTC_HEADER_MAGIC + 2];

    if ((xdim < 3 || xdim > 6 || ydim < 3 || ydim > 6 || zdim < 3 || zdim > 6) && (xdim < 4 || xdim === 7 || xdim === 9 || xdim === 11 || xdim > 12 || ydim < 4 || ydim === 7 || ydim === 9 || ydim === 11 || ydim > 12 || zdim !== 1)) {
      return new Error('Invalid block number in ASTC header');
    }

    var format = getASTCFormat(xdim, ydim);
    var xsize = header[ASTC_HEADER_SIZE_X_BEGIN] + (header[ASTC_HEADER_SIZE_X_BEGIN + 1] << 8) + (header[ASTC_HEADER_SIZE_X_BEGIN + 2] << 16);
    var ysize = header[ASTC_HEADER_SIZE_Y_BEGIN] + (header[ASTC_HEADER_SIZE_Y_BEGIN + 1] << 8) + (header[ASTC_HEADER_SIZE_Y_BEGIN + 2] << 16);
    var zsize = header[ASTC_HEADER_SIZE_Z_BEGIN] + (header[ASTC_HEADER_SIZE_Z_BEGIN + 1] << 8) + (header[ASTC_HEADER_SIZE_Z_BEGIN + 2] << 16);
    buffer = buffer.slice(ASTC_HEADER_LENGTH, buffer.byteLength);
    var astcData = new Uint8Array(buffer);
    var astcAsset = {
      _data: astcData,
      _compressed: true,
      width: xsize,
      height: ysize,
      format: format
    };
    return astcAsset;
  }

  function getASTCFormat(xdim, ydim) {
    if (xdim === 4) {
      return _assetEnum.PixelFormat.RGBA_ASTC_4x4;
    } else if (xdim === 5) {
      if (ydim === 4) {
        return _assetEnum.PixelFormat.RGBA_ASTC_5x4;
      } else {
        return _assetEnum.PixelFormat.RGBA_ASTC_5x5;
      }
    } else if (xdim === 6) {
      if (ydim === 5) {
        return _assetEnum.PixelFormat.RGBA_ASTC_6x5;
      } else {
        return _assetEnum.PixelFormat.RGBA_ASTC_6x6;
      }
    } else if (xdim === 8) {
      if (ydim === 5) {
        return _assetEnum.PixelFormat.RGBA_ASTC_8x5;
      } else if (ydim === 6) {
        return _assetEnum.PixelFormat.RGBA_ASTC_8x6;
      } else {
        return _assetEnum.PixelFormat.RGBA_ASTC_8x8;
      }
    } else if (xdim === 10) {
      if (ydim === 5) {
        return _assetEnum.PixelFormat.RGBA_ASTC_10x5;
      } else if (ydim === 6) {
        return _assetEnum.PixelFormat.RGBA_ASTC_10x6;
      } else if (ydim === 8) {
        return _assetEnum.PixelFormat.RGBA_ASTC_10x8;
      } else {
        return _assetEnum.PixelFormat.RGBA_ASTC_10x10;
      }
    } else {
      if (ydim === 10) {
        return _assetEnum.PixelFormat.RGBA_ASTC_12x10;
      } else {
        return _assetEnum.PixelFormat.RGBA_ASTC_12x12;
      }
    }
  }

  var defaultMap = {
    // Images
    'png': loadImage,
    'jpg': loadImage,
    'bmp': loadImage,
    'jpeg': loadImage,
    'gif': loadImage,
    'ico': loadImage,
    'tiff': loadImage,
    'webp': loadImage,
    'image': loadImage,
    'pvr': loadPVRTex,
    'pkm': loadPKMTex,
    'astc': loadASTCTex,
    // Audio
    'mp3': loadAudioAsAsset,
    'ogg': loadAudioAsAsset,
    'wav': loadAudioAsAsset,
    'm4a': loadAudioAsAsset,
    // video
    'mp4': loadVideoAsAsset,
    // json
    'json': loadJSON,
    'ExportJson': loadJSON,
    // plist
    'plist': loadPlist,
    // asset
    'uuid': _uuidLoader.loadUuid,
    'prefab': _uuidLoader.loadUuid,
    'fire': _uuidLoader.loadUuid,
    'scene': _uuidLoader.loadUuid,
    // binary
    'binary': loadBinary,
    'bin': loadBinary,
    // Font
    'font': _fontLoader.loadFont,
    'eot': _fontLoader.loadFont,
    'ttf': _fontLoader.loadFont,
    'woff': _fontLoader.loadFont,
    'svg': _fontLoader.loadFont,
    'ttc': _fontLoader.loadFont,
    'default': loadNothing
  };
  var ID = 'Loader';
  /**
   * @en The loader pipe in {{loader}}, it can load several types of files:
   * 1. Images
   * 2. JSON
   * 3. Plist
   * 4. Audio
   * 5. Font
   * 6. Binary
   * 7. Cocos Assets
   * It will not interfere with items of unknown type.
   * You can pass custom supported types in the {{loader.addLoadHandlers}}.
   * @zh {{loader}} 中的解析加载管线，可以解析加载下列类型的资源：
   * 1. Images
   * 2. JSON
   * 3. Plist
   * 4. Audio
   * 5. Font
   * 6. Binary
   * 7. Cocos Assets
   * 所有未知类型不会被处理，也可以通过 {{loader.addLoadHandlers}} 来定制加载行为
   */

  var Loader = /*#__PURE__*/function () {
    function Loader(extMap) {
      _classCallCheck(this, Loader);

      this.id = ID;
      this.async = true;
      this.pipeline = null;
      this.extMap = void 0;
      this.extMap = (0, _js.mixin)(extMap, defaultMap);
    }
    /**
     * @en Add custom supported types handler or modify existing type handler.
     * @zh 添加自定义支持的类型处理程序或修改现有的类型处理程序。
     * @param extMap Custom supported types with corresponded handler
     * @param extMap Custom supported types with corresponded handler
     */


    _createClass(Loader, [{
      key: "addHandlers",
      value: function addHandlers(extMap) {
        this.extMap = (0, _js.mixin)(this.extMap, extMap);
      }
    }, {
      key: "handle",
      value: function handle(item, callback) {
        var loadFunc = this.extMap[item.type] || this.extMap['default'];
        return loadFunc.call(this, item, callback);
      }
    }]);

    return Loader;
  }(); // @ts-ignore


  _exports.default = Loader;
  Loader.ID = ID;
  _pipeline.Pipeline.Loader = Loader;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImU6L2QwMDQ1MjUyMC9HaXRodWIvZW5naW5lL2NvY29zL2NvcmUvbG9hZC1waXBlbGluZS9sb2FkZXIudHMiXSwibmFtZXMiOlsibG9hZE5vdGhpbmciLCJsb2FkSlNPTiIsIml0ZW0iLCJjb250ZW50IiwiRXJyb3IiLCJyZXN1bHQiLCJKU09OIiwicGFyc2UiLCJlIiwiaWQiLCJsb2FkSW1hZ2UiLCJsb2FkQnlEZXNlcmlhbGl6ZWRBc3NldCIsIl9vd25lciIsImxlZ2FjeUNDIiwiQXNzZXQiLCJpbWFnZSIsInN5cyIsInBsYXRmb3JtIiwiRkJfUExBWUFCTEVfQURTIiwiSW1hZ2UiLCJyYXdVcmwiLCJpbWFnZUFzc2V0IiwiSW1hZ2VBc3NldCIsIl91dWlkIiwidXVpZCIsIl91cmwiLCJfc2V0UmF3QXNzZXQiLCJfbmF0aXZlQXNzZXQiLCJsb2FkQXVkaW9Bc0Fzc2V0IiwiY2FsbGJhY2siLCJhdWRpb0NsaXAiLCJBdWRpb0NsaXAiLCJsb2FkVmlkZW9Bc0Fzc2V0IiwidmlkZW9DbGlwIiwiVmlkZW9DbGlwIiwibG9hZFBsaXN0IiwicGxpc3RQYXJzZXIiLCJsb2FkQmluYXJ5IiwibG9hZCIsIlBWUl9IRUFERVJfTEVOR1RIIiwiUFZSX01BR0lDIiwiUFZSX0hFQURFUl9NQUdJQyIsIlBWUl9IRUFERVJfRk9STUFUIiwiUFZSX0hFQURFUl9IRUlHSFQiLCJQVlJfSEVBREVSX1dJRFRIIiwiUFZSX0hFQURFUl9NSVBNQVBDT1VOVCIsIlBWUl9IRUFERVJfTUVUQURBVEEiLCJsb2FkUFZSVGV4IiwiYnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJoZWFkZXIiLCJJbnQzMkFycmF5Iiwid2lkdGgiLCJoZWlnaHQiLCJkYXRhT2Zmc2V0Iiwic2xpY2UiLCJieXRlTGVuZ3RoIiwicHZydGNEYXRhIiwiVWludDhBcnJheSIsInB2ckFzc2V0IiwiX2RhdGEiLCJfY29tcHJlc3NlZCIsImhlYWRlckxlbmd0aCIsIkVUQ19QS01fSEVBREVSX1NJWkUiLCJFVENfUEtNX0ZPUk1BVF9PRkZTRVQiLCJFVENfUEtNX0VOQ09ERURfV0lEVEhfT0ZGU0VUIiwiRVRDX1BLTV9FTkNPREVEX0hFSUdIVF9PRkZTRVQiLCJFVENfUEtNX1dJRFRIX09GRlNFVCIsIkVUQ19QS01fSEVJR0hUX09GRlNFVCIsIkVUQzFfUkdCX05PX01JUE1BUFMiLCJFVEMyX1JHQl9OT19NSVBNQVBTIiwiRVRDMl9SR0JBX05PX01JUE1BUFMiLCJyZWFkQkVVaW50MTYiLCJvZmZzZXQiLCJsb2FkUEtNVGV4IiwiZm9ybWF0IiwiZW5jb2RlZFdpZHRoIiwiZW5jb2RlZEhlaWdodCIsImV0Y0RhdGEiLCJldGNBc3NldCIsIkFTVENfTUFHSUMiLCJBU1RDX0hFQURFUl9MRU5HVEgiLCJBU1RDX0hFQURFUl9NQUdJQyIsIkFTVENfSEVBREVSX0JMT0NLRElNIiwiQVNUQ19IRUFERVJfU0laRV9YX0JFR0lOIiwiQVNUQ19IRUFERVJfU0laRV9ZX0JFR0lOIiwiQVNUQ19IRUFERVJfU0laRV9aX0JFR0lOIiwibG9hZEFTVENUZXgiLCJtYWdpY3ZhbCIsInhkaW0iLCJ5ZGltIiwiemRpbSIsImdldEFTVENGb3JtYXQiLCJ4c2l6ZSIsInlzaXplIiwienNpemUiLCJhc3RjRGF0YSIsImFzdGNBc3NldCIsIlBpeGVsRm9ybWF0IiwiUkdCQV9BU1RDXzR4NCIsIlJHQkFfQVNUQ181eDQiLCJSR0JBX0FTVENfNXg1IiwiUkdCQV9BU1RDXzZ4NSIsIlJHQkFfQVNUQ182eDYiLCJSR0JBX0FTVENfOHg1IiwiUkdCQV9BU1RDXzh4NiIsIlJHQkFfQVNUQ184eDgiLCJSR0JBX0FTVENfMTB4NSIsIlJHQkFfQVNUQ18xMHg2IiwiUkdCQV9BU1RDXzEweDgiLCJSR0JBX0FTVENfMTB4MTAiLCJSR0JBX0FTVENfMTJ4MTAiLCJSR0JBX0FTVENfMTJ4MTIiLCJkZWZhdWx0TWFwIiwibG9hZFV1aWQiLCJsb2FkRm9udCIsIklEIiwiTG9hZGVyIiwiZXh0TWFwIiwiYXN5bmMiLCJwaXBlbGluZSIsImxvYWRGdW5jIiwidHlwZSIsImNh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dENFO0FBdUNiLFdBQU9BLFVBdkNNO0FBeUNiO0FBQ0EsWUFBUzhFLG9CQTFDSTtBQTJDYixXQUFRQSxvQkEzQ0s7QUE0Q2IsV0FBUUEsb0JBNUNLO0FBNkNiLFlBQVNBLG9CQTdDSTtBQThDYixXQUFRQSxvQkE5Q0s7QUErQ2IsV0FBUUEsb0JBL0NLO0FBaURiLGVBQVluSDtBQWpEQyxHQUFqQjtBQW9EQSxNQUFJb0gsRUFBRSxHQUFHLFFBQVQ7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztNQXFCcUJDLE07QUFPakIsb0JBQWFDLE1BQWIsRUFBc0I7QUFBQTs7QUFBQSxXQUpmN0csRUFJZSxHQUpWMkcsRUFJVTtBQUFBLFdBSGZHLEtBR2UsR0FIUCxJQUdPO0FBQUEsV0FGZkMsUUFFZSxHQUZhLElBRWI7QUFBQSxXQURkRixNQUNjO0FBQ2xCLFdBQUtBLE1BQUwsR0FBYyxlQUFNQSxNQUFOLEVBQWNMLFVBQWQsQ0FBZDtBQUNIO0FBRUQ7Ozs7Ozs7Ozs7a0NBTWFLLE0sRUFBK0I7QUFDeEMsYUFBS0EsTUFBTCxHQUFjLGVBQU0sS0FBS0EsTUFBWCxFQUFtQkEsTUFBbkIsQ0FBZDtBQUNIOzs7NkJBRU9wSCxJLEVBQU0yQixRLEVBQVU7QUFDcEIsWUFBSTRGLFFBQVEsR0FBRyxLQUFLSCxNQUFMLENBQVlwSCxJQUFJLENBQUN3SCxJQUFqQixLQUEwQixLQUFLSixNQUFMLENBQVksU0FBWixDQUF6QztBQUNBLGVBQU9HLFFBQVEsQ0FBQ0UsSUFBVCxDQUFjLElBQWQsRUFBb0J6SCxJQUFwQixFQUEwQjJCLFFBQTFCLENBQVA7QUFDSDs7OztPQUdMOzs7O0FBM0JxQndGLEVBQUFBLE0sQ0FDVkQsRSxHQUFLQSxFO0FBMkJoQlEscUJBQVNQLE1BQVQsR0FBa0JBLE1BQWxCIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuIENvcHlyaWdodCAoYykgMjAxMy0yMDE2IENodWtvbmcgVGVjaG5vbG9naWVzIEluYy5cclxuIENvcHlyaWdodCAoYykgMjAxNy0yMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxyXG5cclxuIGh0dHA6Ly93d3cuY29jb3MuY29tXHJcblxyXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG4gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBlbmdpbmUgc291cmNlIGNvZGUgKHRoZSBcIlNvZnR3YXJlXCIpLCBhIGxpbWl0ZWQsXHJcbiAgd29ybGR3aWRlLCByb3lhbHR5LWZyZWUsIG5vbi1hc3NpZ25hYmxlLCByZXZvY2FibGUgYW5kIG5vbi1leGNsdXNpdmUgbGljZW5zZVxyXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcclxuICBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXHJcbiAgdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxyXG4gIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxyXG5cclxuIFRoZSBzb2Z0d2FyZSBvciB0b29scyBpbiB0aGlzIExpY2Vuc2UgQWdyZWVtZW50IGFyZSBsaWNlbnNlZCwgbm90IHNvbGQuXHJcbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxyXG5cclxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gVEhFIFNPRlRXQVJFLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAY2F0ZWdvcnkgbG9hZGVyXHJcbiAqL1xyXG5cclxuaW1wb3J0IHttaXhpbn0gZnJvbSAnLi4vdXRpbHMvanMnO1xyXG5pbXBvcnQge0ltYWdlQXNzZXR9IGZyb20gJy4uL2Fzc2V0cy9pbWFnZS1hc3NldCc7XHJcbmltcG9ydCBwbGlzdFBhcnNlciBmcm9tICcuL3BsaXN0LXBhcnNlcic7XHJcbmltcG9ydCB7IFBpcGVsaW5lLCBJUGlwZSB9IGZyb20gJy4vcGlwZWxpbmUnO1xyXG5pbXBvcnQge2xvYWRVdWlkfSBmcm9tICcuL3V1aWQtbG9hZGVyJztcclxuaW1wb3J0IHtsb2FkRm9udH0gZnJvbSAnLi9mb250LWxvYWRlcic7XHJcbmltcG9ydCB7IGxlZ2FjeUNDIH0gZnJvbSAnLi4vZ2xvYmFsLWV4cG9ydHMnO1xyXG5pbXBvcnQgeyBQaXhlbEZvcm1hdCB9IGZyb20gJy4uL2Fzc2V0cy9hc3NldC1lbnVtJztcclxuXHJcbmZ1bmN0aW9uIGxvYWROb3RoaW5nICgpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkSlNPTiAoaXRlbSkge1xyXG4gICAgaWYgKHR5cGVvZiBpdGVtLmNvbnRlbnQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignSlNPTiBMb2FkZXI6IElucHV0IGl0ZW0gZG9lc25cXCd0IGNvbnRhaW4gc3RyaW5nIGNvbnRlbnQnKTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBKU09OLnBhcnNlKGl0ZW0uY29udGVudCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignSlNPTiBMb2FkZXI6IFBhcnNlIGpzb24gWycgKyBpdGVtLmlkICsgJ10gZmFpbGVkIDogJyArIGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkSW1hZ2UgKGl0ZW0pIHtcclxuICAgIGxldCBsb2FkQnlEZXNlcmlhbGl6ZWRBc3NldCA9IChpdGVtLl9vd25lciBpbnN0YW5jZW9mIGxlZ2FjeUNDLkFzc2V0KTtcclxuICAgIGlmIChsb2FkQnlEZXNlcmlhbGl6ZWRBc3NldCkge1xyXG4gICAgICAgIC8vIGFscmVhZHkgaGFzIGNjLkFzc2V0XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGltYWdlID0gaXRlbS5jb250ZW50O1xyXG4gICAgaWYgKGxlZ2FjeUNDLnN5cy5wbGF0Zm9ybSAhPT0gbGVnYWN5Q0Muc3lzLkZCX1BMQVlBQkxFX0FEUyAmJiAhKGltYWdlIGluc3RhbmNlb2YgSW1hZ2UpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW1hZ2UgTG9hZGVyOiBJbnB1dCBpdGVtIGRvZXNuXFwndCBjb250YWluIEltYWdlIGNvbnRlbnQnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBsb2FkIGNjLkltYWdlQXNzZXRcclxuICAgIGxldCByYXdVcmwgPSBpdGVtLnJhd1VybDtcclxuICAgIGxldCBpbWFnZUFzc2V0ID0gaXRlbS5pbWFnZUFzc2V0IHx8IG5ldyBJbWFnZUFzc2V0KCk7XHJcbiAgICBpbWFnZUFzc2V0Ll91dWlkID0gaXRlbS51dWlkO1xyXG4gICAgaW1hZ2VBc3NldC5fdXJsID0gcmF3VXJsO1xyXG4gICAgaW1hZ2VBc3NldC5fc2V0UmF3QXNzZXQocmF3VXJsLCBmYWxzZSk7XHJcbiAgICBpbWFnZUFzc2V0Ll9uYXRpdmVBc3NldCA9IGltYWdlO1xyXG4gICAgcmV0dXJuIGltYWdlQXNzZXQ7XHJcbn1cclxuXHJcbi8vIElmIGF1ZGlvIGlzIGxvYWRlZCBieSB1cmwgZGlyZWN0bHksIHRoYW4gdGhpcyBsb2FkZXIgd2lsbCB3cmFwIGl0IGludG8gYSBuZXcgY2MuQXVkaW9DbGlwIG9iamVjdC5cclxuLy8gSWYgYXVkaW8gaXMgbG9hZGVkIGJ5IGRlc2VyaWFsaXplZCBBdWRpb0NsaXAsIHRoYW4gdGhpcyBsb2FkZXIgd2lsbCBiZSBza2lwcGVkLlxyXG5mdW5jdGlvbiBsb2FkQXVkaW9Bc0Fzc2V0IChpdGVtLCBjYWxsYmFjaykge1xyXG4gICAgbGV0IGxvYWRCeURlc2VyaWFsaXplZEFzc2V0ID0gKGl0ZW0uX293bmVyIGluc3RhbmNlb2YgbGVnYWN5Q0MuQXNzZXQpO1xyXG4gICAgaWYgKGxvYWRCeURlc2VyaWFsaXplZEFzc2V0KSB7XHJcbiAgICAgICAgLy8gYWxyZWFkeSBoYXMgY2MuQXNzZXRcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYXVkaW9DbGlwID0gbmV3IGxlZ2FjeUNDLkF1ZGlvQ2xpcCgpO1xyXG4gICAgYXVkaW9DbGlwLl9zZXRSYXdBc3NldChpdGVtLnJhd1VybCwgZmFsc2UpO1xyXG4gICAgYXVkaW9DbGlwLl9uYXRpdmVBc3NldCA9IGl0ZW0uY29udGVudDtcclxuICAgIHJldHVybiBhdWRpb0NsaXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRWaWRlb0FzQXNzZXQgKGl0ZW0sIGNhbGxiYWNrKSB7XHJcbiAgICBsZXQgbG9hZEJ5RGVzZXJpYWxpemVkQXNzZXQgPSAoaXRlbS5fb3duZXIgaW5zdGFuY2VvZiBsZWdhY3lDQy5Bc3NldCk7XHJcbiAgICBpZiAobG9hZEJ5RGVzZXJpYWxpemVkQXNzZXQpIHtcclxuICAgICAgICAvLyBhbHJlYWR5IGhhcyBjYy5Bc3NldFxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB2aWRlb0NsaXAgPSBuZXcgbGVnYWN5Q0MuVmlkZW9DbGlwKCk7XHJcbiAgICB2aWRlb0NsaXAuX3NldFJhd0Fzc2V0KGl0ZW0ucmF3VXJsLCBmYWxzZSk7XHJcbiAgICB2aWRlb0NsaXAuX25hdGl2ZUFzc2V0ID0gaXRlbS5jb250ZW50O1xyXG4gICAgcmV0dXJuIHZpZGVvQ2xpcDtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZFBsaXN0IChpdGVtKSB7XHJcbiAgICBpZiAodHlwZW9mIGl0ZW0uY29udGVudCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdQbGlzdCBMb2FkZXI6IElucHV0IGl0ZW0gZG9lc25cXCd0IGNvbnRhaW4gc3RyaW5nIGNvbnRlbnQnKTtcclxuICAgIH1cclxuICAgIGxldCByZXN1bHQgPSBwbGlzdFBhcnNlci5wYXJzZShpdGVtLmNvbnRlbnQpO1xyXG4gICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdQbGlzdCBMb2FkZXI6IFBhcnNlIFsnICsgaXRlbS5pZCArICddIGZhaWxlZCcpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkQmluYXJ5IChpdGVtKSB7XHJcbiAgICAvLyBJbnZva2UgY3VzdG9tIGhhbmRsZVxyXG4gICAgaWYgKGl0ZW0ubG9hZCkge1xyXG4gICAgICAgIHJldHVybiBpdGVtLmxvYWQoaXRlbS5jb250ZW50KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBpdGVtLmNvbnRlbnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vPT09PT09PT09PT09PT09Ly9cclxuLy8gUFZSIGNvbnN0YW50cyAvL1xyXG4vLz09PT09PT09PT09PT09PS8vXHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90b2ppL3RleHR1cmUtdGVzdGVyL2Jsb2IvbWFzdGVyL2pzL3dlYmdsLXRleHR1cmUtdXRpbC5qcyNMNDI0XHJcbmNvbnN0IFBWUl9IRUFERVJfTEVOR1RIID0gMTM7IC8vIFRoZSBoZWFkZXIgbGVuZ3RoIGluIDMyIGJpdCBpbnRzLlxyXG5jb25zdCBQVlJfTUFHSUMgPSAweDAzNTI1NjUwOyAvLzB4NTA1NjUyMDM7XHJcblxyXG4vLyBPZmZzZXRzIGludG8gdGhlIGhlYWRlciBhcnJheS5cclxuY29uc3QgUFZSX0hFQURFUl9NQUdJQyA9IDA7XHJcbmNvbnN0IFBWUl9IRUFERVJfRk9STUFUID0gMjtcclxuY29uc3QgUFZSX0hFQURFUl9IRUlHSFQgPSA2O1xyXG5jb25zdCBQVlJfSEVBREVSX1dJRFRIID0gNztcclxuY29uc3QgUFZSX0hFQURFUl9NSVBNQVBDT1VOVCA9IDExO1xyXG5jb25zdCBQVlJfSEVBREVSX01FVEFEQVRBID0gMTI7XHJcblxyXG5mdW5jdGlvbiBsb2FkUFZSVGV4IChpdGVtKSB7XHJcbiAgICBsZXQgYnVmZmVyID0gaXRlbS5jb250ZW50IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgPyBpdGVtLmNvbnRlbnQgOiBpdGVtLmNvbnRlbnQuYnVmZmVyO1xyXG4gICAgLy8gR2V0IGEgdmlldyBvZiB0aGUgYXJyYXlCdWZmZXIgdGhhdCByZXByZXNlbnRzIHRoZSBERFMgaGVhZGVyLlxyXG4gICAgbGV0IGhlYWRlciA9IG5ldyBJbnQzMkFycmF5KGJ1ZmZlciwgMCwgUFZSX0hFQURFUl9MRU5HVEgpO1xyXG5cclxuICAgIC8vIERvIHNvbWUgc2FuaXR5IGNoZWNrcyB0byBtYWtlIHN1cmUgdGhpcyBpcyBhIHZhbGlkIEREUyBmaWxlLlxyXG4gICAgaWYoaGVhZGVyW1BWUl9IRUFERVJfTUFHSUNdID09PSBQVlJfTUFHSUMpIHtcclxuICAgICAgLy8gR2F0aGVyIG90aGVyIGJhc2ljIG1ldHJpY3MgYW5kIGEgdmlldyBvZiB0aGUgcmF3IHRoZSBEWFQgZGF0YS5cclxuICAgICAgICBsZXQgd2lkdGggPSBoZWFkZXJbUFZSX0hFQURFUl9XSURUSF07XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IGhlYWRlcltQVlJfSEVBREVSX0hFSUdIVF07XHJcbiAgICAgICAgbGV0IGRhdGFPZmZzZXQgPSBoZWFkZXJbUFZSX0hFQURFUl9NRVRBREFUQV0gKyA1MjtcclxuICAgICAgICAvLyB0b2RvOiB1c2UgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCBkYXRhT2Zmc2V0KSBpbnN0ZWFkXHJcbiAgICAgICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGRhdGFPZmZzZXQsIGJ1ZmZlci5ieXRlTGVuZ3RoKTtcclxuICAgICAgICBsZXQgcHZydGNEYXRhID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcclxuICAgICAgICBsZXQgcHZyQXNzZXQgPSB7XHJcbiAgICAgICAgICAgIF9kYXRhOiBwdnJ0Y0RhdGEsXHJcbiAgICAgICAgICAgIF9jb21wcmVzc2VkOiB0cnVlLFxyXG4gICAgICAgICAgICB3aWR0aDogd2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHB2ckFzc2V0O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaGVhZGVyWzExXSA9PT0gMHgyMTUyNTY1MCkge1xyXG4gICAgICAgIGxldCBoZWFkZXJMZW5ndGggPSBoZWFkZXJbMF0sXHJcblx0XHRoZWlnaHQgPSBoZWFkZXJbMV0sXHJcbiAgICAgICAgd2lkdGggPSBoZWFkZXJbMl1cclxuICAgICAgICAvLyB0b2RvOiB1c2UgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCBoZWFkZXJMZW5ndGgpIGluc3RlYWRcclxuICAgICAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoaGVhZGVyTGVuZ3RoLCBidWZmZXIuYnl0ZUxlbmd0aCk7XHJcbiAgICAgICAgbGV0IHB2cnRjRGF0YSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XHJcbiAgICAgICAgbGV0IHB2ckFzc2V0ID0ge1xyXG4gICAgICAgICAgICBfZGF0YTogcHZydGNEYXRhLFxyXG4gICAgICAgICAgICBfY29tcHJlc3NlZDogdHJ1ZSxcclxuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBwdnJBc3NldDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBuZXcgRXJyb3IoXCJJbnZhbGlkIG1hZ2ljIG51bWJlciBpbiBQVlIgaGVhZGVyXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLz09PT09PT09PT09PT09PS8vXHJcbi8vIEVUQyBjb25zdGFudHMgLy9cclxuLy89PT09PT09PT09PT09PT0vL1xyXG5cclxuY29uc3QgRVRDX1BLTV9IRUFERVJfU0laRSA9IDE2O1xyXG5cclxuY29uc3QgRVRDX1BLTV9GT1JNQVRfT0ZGU0VUID0gNjtcclxuY29uc3QgRVRDX1BLTV9FTkNPREVEX1dJRFRIX09GRlNFVCA9IDg7XHJcbmNvbnN0IEVUQ19QS01fRU5DT0RFRF9IRUlHSFRfT0ZGU0VUID0gMTA7XHJcbmNvbnN0IEVUQ19QS01fV0lEVEhfT0ZGU0VUID0gMTI7XHJcbmNvbnN0IEVUQ19QS01fSEVJR0hUX09GRlNFVCA9IDE0O1xyXG5cclxuY29uc3QgRVRDMV9SR0JfTk9fTUlQTUFQUyAgID0gMDtcclxuY29uc3QgRVRDMl9SR0JfTk9fTUlQTUFQUyAgID0gMTtcclxuY29uc3QgRVRDMl9SR0JBX05PX01JUE1BUFMgID0gMztcclxuXHJcblxyXG5mdW5jdGlvbiByZWFkQkVVaW50MTYoaGVhZGVyLCBvZmZzZXQpIHtcclxuICAgIHJldHVybiAoaGVhZGVyW29mZnNldF0gPDwgOCkgfCBoZWFkZXJbb2Zmc2V0KzFdO1xyXG59XHJcbmZ1bmN0aW9uIGxvYWRQS01UZXgoaXRlbSkge1xyXG4gICAgbGV0IGJ1ZmZlciA9IGl0ZW0uY29udGVudCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gaXRlbS5jb250ZW50IDogaXRlbS5jb250ZW50LmJ1ZmZlcjtcclxuICAgIGxldCBoZWFkZXIgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xyXG4gICAgbGV0IGZvcm1hdCA9IHJlYWRCRVVpbnQxNihoZWFkZXIsIEVUQ19QS01fRk9STUFUX09GRlNFVCk7XHJcbiAgICBpZiAoZm9ybWF0ICE9PSBFVEMxX1JHQl9OT19NSVBNQVBTICYmIGZvcm1hdCAhPT0gRVRDMl9SR0JfTk9fTUlQTUFQUyAmJiBmb3JtYXQgIT09IEVUQzJfUkdCQV9OT19NSVBNQVBTKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihcIkludmFsaWQgbWFnaWMgbnVtYmVyIGluIEVUQyBoZWFkZXJcIik7XHJcbiAgICB9XHJcbiAgICBsZXQgd2lkdGggPSByZWFkQkVVaW50MTYoaGVhZGVyLCBFVENfUEtNX1dJRFRIX09GRlNFVCk7XHJcbiAgICBsZXQgaGVpZ2h0ID0gcmVhZEJFVWludDE2KGhlYWRlciwgRVRDX1BLTV9IRUlHSFRfT0ZGU0VUKTtcclxuICAgIGxldCBlbmNvZGVkV2lkdGggPSByZWFkQkVVaW50MTYoaGVhZGVyLCBFVENfUEtNX0VOQ09ERURfV0lEVEhfT0ZGU0VUKTtcclxuICAgIGxldCBlbmNvZGVkSGVpZ2h0ID0gcmVhZEJFVWludDE2KGhlYWRlciwgRVRDX1BLTV9FTkNPREVEX0hFSUdIVF9PRkZTRVQpO1xyXG4gICAgLy8gdG9kbzogdXNlIG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgRVRDX1BLTV9IRUFERVJfU0laRSkgaW5zdGVhZFxyXG4gICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKEVUQ19QS01fSEVBREVSX1NJWkUsIGJ1ZmZlci5ieXRlTGVuZ3RoKTtcclxuICAgIGxldCBldGNEYXRhID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcclxuXHJcbiAgICBsZXQgZXRjQXNzZXQgPSB7XHJcbiAgICAgICAgX2RhdGE6IGV0Y0RhdGEsXHJcbiAgICAgICAgX2NvbXByZXNzZWQ6IHRydWUsXHJcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgICAgIGhlaWdodDogaGVpZ2h0XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGV0Y0Fzc2V0O1xyXG59XHJcblxyXG4vLz09PT09PT09PT09PT09PS8vXHJcbi8vIEFTVEMgY29uc3RhbnRzIC8vXHJcbi8vPT09PT09PT09PT09PT09Ly9cclxuXHJcbi8vIHN0cnVjdCBhc3RjX2hlYWRlclxyXG4vLyB7XHJcbi8vIFx0dWludDhfdCBtYWdpY1s0XTtcclxuLy8gXHR1aW50OF90IGJsb2NrZGltX3g7XHJcbi8vIFx0dWludDhfdCBibG9ja2RpbV95O1xyXG4vLyBcdHVpbnQ4X3QgYmxvY2tkaW1fejtcclxuLy8gXHR1aW50OF90IHhzaXplWzNdO1x0XHRcdC8vIHgtc2l6ZSA9IHhzaXplWzBdICsgeHNpemVbMV0gKyB4c2l6ZVsyXVxyXG4vLyBcdHVpbnQ4X3QgeXNpemVbM107XHRcdFx0Ly8geC1zaXplLCB5LXNpemUgYW5kIHotc2l6ZSBhcmUgZ2l2ZW4gaW4gdGV4ZWxzO1xyXG4vLyBcdHVpbnQ4X3QgenNpemVbM107XHRcdFx0Ly8gYmxvY2sgY291bnQgaXMgaW5mZXJyZWRcclxuLy8gfTtcclxuY29uc3QgQVNUQ19NQUdJQyA9IDB4NUNBMUFCMTM7XHJcblxyXG5jb25zdCBBU1RDX0hFQURFUl9MRU5HVEggPSAxNjsgLy8gVGhlIGhlYWRlciBsZW5ndGhcclxuY29uc3QgQVNUQ19IRUFERVJfTUFHSUMgPSA0O1xyXG5jb25zdCBBU1RDX0hFQURFUl9CTE9DS0RJTSA9IDM7XHJcblxyXG5jb25zdCBBU1RDX0hFQURFUl9TSVpFX1hfQkVHSU4gPSA3O1xyXG5jb25zdCBBU1RDX0hFQURFUl9TSVpFX1lfQkVHSU4gPSAxMDtcclxuY29uc3QgQVNUQ19IRUFERVJfU0laRV9aX0JFR0lOID0gMTM7XHJcblxyXG5mdW5jdGlvbiBsb2FkQVNUQ1RleCAoaXRlbSkge1xyXG4gICAgbGV0IGJ1ZmZlciA9IGl0ZW0uY29udGVudCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gaXRlbS5jb250ZW50IDogaXRlbS5jb250ZW50LmJ1ZmZlcjtcclxuICAgIGNvbnN0IGhlYWRlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XHJcblxyXG4gICAgY29uc3QgbWFnaWN2YWwgPSBoZWFkZXJbMF0gKyAoaGVhZGVyWzFdIDw8IDgpICsgKGhlYWRlclsyXSA8PCAxNikgKyAoaGVhZGVyWzNdIDw8IDI0KTtcclxuICAgIGlmIChtYWdpY3ZhbCAhPT0gQVNUQ19NQUdJQykge1xyXG4gICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgbWFnaWMgbnVtYmVyIGluIEFTVEMgaGVhZGVyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeGRpbSA9IGhlYWRlcltBU1RDX0hFQURFUl9NQUdJQ107XHJcbiAgICBjb25zdCB5ZGltID0gaGVhZGVyW0FTVENfSEVBREVSX01BR0lDICsgMV07XHJcbiAgICBjb25zdCB6ZGltID0gaGVhZGVyW0FTVENfSEVBREVSX01BR0lDICsgMl07XHJcbiAgICBpZiAoKHhkaW0gPCAzIHx8IHhkaW0gPiA2IHx8IHlkaW0gPCAzIHx8IHlkaW0gPiA2IHx8IHpkaW0gPCAzIHx8IHpkaW0gPiA2KSAmJlxyXG4gICAgICAgICh4ZGltIDwgNCB8fCB4ZGltID09PSA3IHx8IHhkaW0gPT09IDkgfHwgeGRpbSA9PT0gMTEgfHwgeGRpbSA+IDEyIHx8XHJcbiAgICAgICAgeWRpbSA8IDQgfHwgeWRpbSA9PT0gNyB8fCB5ZGltID09PSA5IHx8IHlkaW0gPT09IDExIHx8IHlkaW0gPiAxMiB8fCB6ZGltICE9PSAxKSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgYmxvY2sgbnVtYmVyIGluIEFTVEMgaGVhZGVyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybWF0ID0gZ2V0QVNUQ0Zvcm1hdCh4ZGltLHlkaW0pO1xyXG5cclxuICAgIGNvbnN0IHhzaXplID0gaGVhZGVyW0FTVENfSEVBREVSX1NJWkVfWF9CRUdJTl0gKyAoaGVhZGVyW0FTVENfSEVBREVSX1NJWkVfWF9CRUdJTiArIDFdIDw8IDgpICsgKGhlYWRlcltBU1RDX0hFQURFUl9TSVpFX1hfQkVHSU4gKyAyXSA8PCAxNik7XHJcbiAgICBjb25zdCB5c2l6ZSA9IGhlYWRlcltBU1RDX0hFQURFUl9TSVpFX1lfQkVHSU5dICsgKGhlYWRlcltBU1RDX0hFQURFUl9TSVpFX1lfQkVHSU4gKyAxXSA8PCA4KSArIChoZWFkZXJbQVNUQ19IRUFERVJfU0laRV9ZX0JFR0lOICsgMl0gPDwgMTYpO1xyXG4gICAgY29uc3QgenNpemUgPSBoZWFkZXJbQVNUQ19IRUFERVJfU0laRV9aX0JFR0lOXSArIChoZWFkZXJbQVNUQ19IRUFERVJfU0laRV9aX0JFR0lOICsgMV0gPDwgOCkgKyAoaGVhZGVyW0FTVENfSEVBREVSX1NJWkVfWl9CRUdJTiArIDJdIDw8IDE2KTtcclxuXHJcbiAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoQVNUQ19IRUFERVJfTEVOR1RILCBidWZmZXIuYnl0ZUxlbmd0aCk7XHJcbiAgICBjb25zdCBhc3RjRGF0YSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XHJcblxyXG4gICAgY29uc3QgYXN0Y0Fzc2V0ID0ge1xyXG4gICAgICAgIF9kYXRhOiBhc3RjRGF0YSxcclxuICAgICAgICBfY29tcHJlc3NlZDogdHJ1ZSxcclxuICAgICAgICB3aWR0aDogeHNpemUsXHJcbiAgICAgICAgaGVpZ2h0OiB5c2l6ZSxcclxuICAgICAgICBmb3JtYXQ6IGZvcm1hdFxyXG4gICAgfTtcclxuICAgIHJldHVybiBhc3RjQXNzZXQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEFTVENGb3JtYXQgKHhkaW0seWRpbSkge1xyXG4gICAgaWYgKHhkaW0gPT09IDQpIHtcclxuICAgICAgICByZXR1cm4gUGl4ZWxGb3JtYXQuUkdCQV9BU1RDXzR4NDtcclxuICAgIH0gZWxzZSBpZiAoeGRpbSA9PT0gNSkge1xyXG4gICAgICAgIGlmICh5ZGltID09PSA0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaXhlbEZvcm1hdC5SR0JBX0FTVENfNXg0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaXhlbEZvcm1hdC5SR0JBX0FTVENfNXg1O1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoeGRpbSA9PT0gNikge1xyXG4gICAgICAgIGlmICh5ZGltID09PSA1KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaXhlbEZvcm1hdC5SR0JBX0FTVENfNng1O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaXhlbEZvcm1hdC5SR0JBX0FTVENfNng2O1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoeGRpbSA9PT0gOCkge1xyXG4gICAgICAgIGlmICh5ZGltID09PSA1KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaXhlbEZvcm1hdC5SR0JBX0FTVENfOHg1O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoeWRpbSA9PT0gNikge1xyXG4gICAgICAgICAgICByZXR1cm4gUGl4ZWxGb3JtYXQuUkdCQV9BU1RDXzh4NjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gUGl4ZWxGb3JtYXQuUkdCQV9BU1RDXzh4ODtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHhkaW0gPT09IDEwKSB7XHJcbiAgICAgICAgaWYgKHlkaW0gPT09IDUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBpeGVsRm9ybWF0LlJHQkFfQVNUQ18xMHg1O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoeWRpbSA9PT0gNikge1xyXG4gICAgICAgICAgICByZXR1cm4gUGl4ZWxGb3JtYXQuUkdCQV9BU1RDXzEweDY7XHJcbiAgICAgICAgfSBlbHNlIGlmICh5ZGltID09PSA4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaXhlbEZvcm1hdC5SR0JBX0FTVENfMTB4ODtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gUGl4ZWxGb3JtYXQuUkdCQV9BU1RDXzEweDEwO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHlkaW0gPT09IDEwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaXhlbEZvcm1hdC5SR0JBX0FTVENfMTJ4MTA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBpeGVsRm9ybWF0LlJHQkFfQVNUQ18xMngxMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmxldCBkZWZhdWx0TWFwID0ge1xyXG4gICAgLy8gSW1hZ2VzXHJcbiAgICAncG5nJyA6IGxvYWRJbWFnZSxcclxuICAgICdqcGcnIDogbG9hZEltYWdlLFxyXG4gICAgJ2JtcCcgOiBsb2FkSW1hZ2UsXHJcbiAgICAnanBlZycgOiBsb2FkSW1hZ2UsXHJcbiAgICAnZ2lmJyA6IGxvYWRJbWFnZSxcclxuICAgICdpY28nIDogbG9hZEltYWdlLFxyXG4gICAgJ3RpZmYnIDogbG9hZEltYWdlLFxyXG4gICAgJ3dlYnAnIDogbG9hZEltYWdlLFxyXG4gICAgJ2ltYWdlJyA6IGxvYWRJbWFnZSxcclxuICAgICdwdnInIDogbG9hZFBWUlRleCxcclxuICAgICdwa20nIDogbG9hZFBLTVRleCxcclxuICAgICdhc3RjJyA6IGxvYWRBU1RDVGV4LFxyXG5cclxuICAgIC8vIEF1ZGlvXHJcbiAgICAnbXAzJyA6IGxvYWRBdWRpb0FzQXNzZXQsXHJcbiAgICAnb2dnJyA6IGxvYWRBdWRpb0FzQXNzZXQsXHJcbiAgICAnd2F2JyA6IGxvYWRBdWRpb0FzQXNzZXQsXHJcbiAgICAnbTRhJyA6IGxvYWRBdWRpb0FzQXNzZXQsXHJcblxyXG4gICAgLy8gdmlkZW9cclxuICAgICdtcDQnIDogbG9hZFZpZGVvQXNBc3NldCxcclxuXHJcbiAgICAvLyBqc29uXHJcbiAgICAnanNvbicgOiBsb2FkSlNPTixcclxuICAgICdFeHBvcnRKc29uJyA6IGxvYWRKU09OLFxyXG5cclxuICAgIC8vIHBsaXN0XHJcbiAgICAncGxpc3QnIDogbG9hZFBsaXN0LFxyXG5cclxuICAgIC8vIGFzc2V0XHJcbiAgICAndXVpZCcgOiBsb2FkVXVpZCxcclxuICAgICdwcmVmYWInIDogbG9hZFV1aWQsXHJcbiAgICAnZmlyZScgOiBsb2FkVXVpZCxcclxuICAgICdzY2VuZScgOiBsb2FkVXVpZCxcclxuXHJcbiAgICAvLyBiaW5hcnlcclxuICAgICdiaW5hcnknIDogbG9hZEJpbmFyeSxcclxuICAgICdiaW4nOiBsb2FkQmluYXJ5LFxyXG5cclxuICAgIC8vIEZvbnRcclxuICAgICdmb250JyA6IGxvYWRGb250LFxyXG4gICAgJ2VvdCcgOiBsb2FkRm9udCxcclxuICAgICd0dGYnIDogbG9hZEZvbnQsXHJcbiAgICAnd29mZicgOiBsb2FkRm9udCxcclxuICAgICdzdmcnIDogbG9hZEZvbnQsXHJcbiAgICAndHRjJyA6IGxvYWRGb250LFxyXG5cclxuICAgICdkZWZhdWx0JyA6IGxvYWROb3RoaW5nXHJcbn07XHJcblxyXG5sZXQgSUQgPSAnTG9hZGVyJztcclxuXHJcbi8qKlxyXG4gKiBAZW4gVGhlIGxvYWRlciBwaXBlIGluIHt7bG9hZGVyfX0sIGl0IGNhbiBsb2FkIHNldmVyYWwgdHlwZXMgb2YgZmlsZXM6XHJcbiAqIDEuIEltYWdlc1xyXG4gKiAyLiBKU09OXHJcbiAqIDMuIFBsaXN0XHJcbiAqIDQuIEF1ZGlvXHJcbiAqIDUuIEZvbnRcclxuICogNi4gQmluYXJ5XHJcbiAqIDcuIENvY29zIEFzc2V0c1xyXG4gKiBJdCB3aWxsIG5vdCBpbnRlcmZlcmUgd2l0aCBpdGVtcyBvZiB1bmtub3duIHR5cGUuXHJcbiAqIFlvdSBjYW4gcGFzcyBjdXN0b20gc3VwcG9ydGVkIHR5cGVzIGluIHRoZSB7e2xvYWRlci5hZGRMb2FkSGFuZGxlcnN9fS5cclxuICogQHpoIHt7bG9hZGVyfX0g5Lit55qE6Kej5p6Q5Yqg6L29566h57q/77yM5Y+v5Lul6Kej5p6Q5Yqg6L295LiL5YiX57G75Z6L55qE6LWE5rqQ77yaXHJcbiAqIDEuIEltYWdlc1xyXG4gKiAyLiBKU09OXHJcbiAqIDMuIFBsaXN0XHJcbiAqIDQuIEF1ZGlvXHJcbiAqIDUuIEZvbnRcclxuICogNi4gQmluYXJ5XHJcbiAqIDcuIENvY29zIEFzc2V0c1xyXG4gKiDmiYDmnInmnKrnn6XnsbvlnovkuI3kvJrooqvlpITnkIbvvIzkuZ/lj6/ku6XpgJrov4cge3tsb2FkZXIuYWRkTG9hZEhhbmRsZXJzfX0g5p2l5a6a5Yi25Yqg6L296KGM5Li6XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkZXIgaW1wbGVtZW50cyBJUGlwZSB7XHJcbiAgICBzdGF0aWMgSUQgPSBJRDtcclxuXHJcbiAgICBwdWJsaWMgaWQgPSBJRDtcclxuICAgIHB1YmxpYyBhc3luYyA9IHRydWU7XHJcbiAgICBwdWJsaWMgcGlwZWxpbmU6IFBpcGVsaW5lIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGV4dE1hcDogb2JqZWN0O1xyXG4gICAgY29uc3RydWN0b3IgKGV4dE1hcD8pIHtcclxuICAgICAgICB0aGlzLmV4dE1hcCA9IG1peGluKGV4dE1hcCwgZGVmYXVsdE1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gQWRkIGN1c3RvbSBzdXBwb3J0ZWQgdHlwZXMgaGFuZGxlciBvciBtb2RpZnkgZXhpc3RpbmcgdHlwZSBoYW5kbGVyLlxyXG4gICAgICogQHpoIOa3u+WKoOiHquWumuS5ieaUr+aMgeeahOexu+Wei+WkhOeQhueoi+W6j+aIluS/ruaUueeOsOacieeahOexu+Wei+WkhOeQhueoi+W6j+OAglxyXG4gICAgICogQHBhcmFtIGV4dE1hcCBDdXN0b20gc3VwcG9ydGVkIHR5cGVzIHdpdGggY29ycmVzcG9uZGVkIGhhbmRsZXJcclxuICAgICAqIEBwYXJhbSBleHRNYXAgQ3VzdG9tIHN1cHBvcnRlZCB0eXBlcyB3aXRoIGNvcnJlc3BvbmRlZCBoYW5kbGVyXHJcbiAgICAgKi9cclxuICAgIGFkZEhhbmRsZXJzIChleHRNYXA6IE1hcDxzdHJpbmcsIEZ1bmN0aW9uPikge1xyXG4gICAgICAgIHRoaXMuZXh0TWFwID0gbWl4aW4odGhpcy5leHRNYXAsIGV4dE1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlIChpdGVtLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGxldCBsb2FkRnVuYyA9IHRoaXMuZXh0TWFwW2l0ZW0udHlwZV0gfHwgdGhpcy5leHRNYXBbJ2RlZmF1bHQnXTtcclxuICAgICAgICByZXR1cm4gbG9hZEZ1bmMuY2FsbCh0aGlzLCBpdGVtLCBjYWxsYmFjayk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuUGlwZWxpbmUuTG9hZGVyID0gTG9hZGVyO1xyXG4iXX0=