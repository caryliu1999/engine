(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "../../../core/math/index.js", "../utils.js"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("../../../core/math/index.js"), require("../utils.js"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.index, global.utils);
    global.radialFilled = mod.exports;
  }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports, _index, _utils) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.radialFilled = void 0;

  function _createForOfIteratorHelper(o) { if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

  var PI_2 = Math.PI * 2;
  var EPSILON = 1e-6;
  var _vertPos = [new _index.Vec2(), new _index.Vec2(), new _index.Vec2(), new _index.Vec2()];

  var _vertices = new Array(4);

  var _uvs = new Array(8);

  var _intersectPoint_1 = [new _index.Vec2(), new _index.Vec2(), new _index.Vec2(), new _index.Vec2()];
  var _intersectPoint_2 = [new _index.Vec2(), new _index.Vec2(), new _index.Vec2(), new _index.Vec2()];

  var _center = new _index.Vec2();

  var _triangles = [new _index.Vec2(), new _index.Vec2(), new _index.Vec2(), new _index.Vec2()];

  function _calcIntersectedPoints(left, right, bottom, top, center, angle, intersectPoints) {
    // left bottom, right, top
    var sinAngle = Math.sin(angle);
    sinAngle = Math.abs(sinAngle) > EPSILON ? sinAngle : 0;
    var cosAngle = Math.cos(angle);
    cosAngle = Math.abs(cosAngle) > EPSILON ? cosAngle : 0;
    var tanAngle = 0;
    var cotAngle = 0;

    if (cosAngle !== 0) {
      tanAngle = sinAngle / cosAngle; // calculate right and left

      if ((left - center.x) * cosAngle > 0) {
        var yLeft = center.y + tanAngle * (left - center.x);
        intersectPoints[0].x = left;
        intersectPoints[0].y = yLeft;
      }

      if ((right - center.x) * cosAngle > 0) {
        var yRight = center.y + tanAngle * (right - center.x);
        intersectPoints[2].x = right;
        intersectPoints[2].y = yRight;
      }
    }

    if (sinAngle !== 0) {
      cotAngle = cosAngle / sinAngle; // calculate  top and bottom

      if ((top - center.y) * sinAngle > 0) {
        var xTop = center.x + cotAngle * (top - center.y);
        intersectPoints[3].x = xTop;
        intersectPoints[3].y = top;
      }

      if ((bottom - center.y) * sinAngle > 0) {
        var xBottom = center.x + cotAngle * (bottom - center.y);
        intersectPoints[1].x = xBottom;
        intersectPoints[1].y = bottom;
      }
    }
  }

  function _calculateVertices(sprite) {
    var uiTrans = sprite.node._uiProps.uiTransformComp;
    var width = uiTrans.width;
    var height = uiTrans.height;
    var appX = uiTrans.anchorX * width;
    var appY = uiTrans.anchorY * height;
    var l = -appX;
    var b = -appY;
    var r = width - appX;
    var t = height - appY;
    var vertices = _vertices;
    vertices[0] = l;
    vertices[1] = b;
    vertices[2] = r;
    vertices[3] = t;
    var fillCenter = sprite.fillCenter;
    var cx = _center.x = Math.min(Math.max(0, fillCenter.x), 1) * (r - l) + l;
    var cy = _center.y = Math.min(Math.max(0, fillCenter.y), 1) * (t - b) + b;
    _vertPos[0].x = _vertPos[3].x = l;
    _vertPos[1].x = _vertPos[2].x = r;
    _vertPos[0].y = _vertPos[1].y = b;
    _vertPos[2].y = _vertPos[3].y = t;

    var _iterator = _createForOfIteratorHelper(_triangles),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var num = _step.value;

        _index.Vec2.set(num, 0, 0);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    if (cx !== vertices[0]) {
      _index.Vec2.set(_triangles[0], 3, 0);
    }

    if (cx !== vertices[2]) {
      _index.Vec2.set(_triangles[2], 1, 2);
    }

    if (cy !== vertices[1]) {
      _index.Vec2.set(_triangles[1], 0, 1);
    }

    if (cy !== vertices[3]) {
      _index.Vec2.set(_triangles[3], 2, 3);
    }
  }

  function _calculateUVs(spriteFrame) {
    var atlasWidth = spriteFrame.width;
    var atlasHeight = spriteFrame.height;
    var textureRect = spriteFrame.getRect();
    var u0 = 0;
    var u1 = 0;
    var v0 = 0;
    var v1 = 0;
    var uvs = _uvs;

    if (spriteFrame.isRotated()) {
      u0 = textureRect.x / atlasWidth;
      u1 = (textureRect.x + textureRect.height) / atlasWidth;
      v0 = textureRect.y / atlasHeight;
      v1 = (textureRect.y + textureRect.width) / atlasHeight;
      uvs[0] = uvs[2] = u0;
      uvs[4] = uvs[6] = u1;
      uvs[3] = uvs[7] = v1;
      uvs[1] = uvs[5] = v0;
    } else {
      u0 = textureRect.x / atlasWidth;
      u1 = (textureRect.x + textureRect.width) / atlasWidth;
      v0 = textureRect.y / atlasHeight;
      v1 = (textureRect.y + textureRect.height) / atlasHeight;
      uvs[0] = uvs[4] = u0;
      uvs[2] = uvs[6] = u1;
      uvs[1] = uvs[3] = v1;
      uvs[5] = uvs[7] = v0;
    }
  }

  function _getVertAngle(start, end) {
    var placementX = end.x - start.x;
    var placementY = end.y - start.y;

    if (placementX === 0 && placementY === 0) {
      return 0;
    } else if (placementX === 0) {
      if (placementY > 0) {
        return Math.PI * 0.5;
      } else {
        return Math.PI * 1.5;
      }
    } else {
      var angle = Math.atan(placementY / placementX);

      if (placementX < 0) {
        angle += Math.PI;
      }

      return angle;
    }
  }

  function _generateTriangle(dataList, offset, vert0, vert1, vert2) {
    var vertices = _vertices;
    var v0x = vertices[0];
    var v0y = vertices[1];
    var v1x = vertices[2];
    var v1y = vertices[3];
    dataList[offset].x = vert0.x;
    dataList[offset].y = vert0.y;
    dataList[offset + 1].x = vert1.x;
    dataList[offset + 1].y = vert1.y;
    dataList[offset + 2].x = vert2.x;
    dataList[offset + 2].y = vert2.y;
    var progressX = 0;
    var progressY = 0;
    progressX = (vert0.x - v0x) / (v1x - v0x);
    progressY = (vert0.y - v0y) / (v1y - v0y);

    _generateUV(progressX, progressY, dataList, offset);

    progressX = (vert1.x - v0x) / (v1x - v0x);
    progressY = (vert1.y - v0y) / (v1y - v0y);

    _generateUV(progressX, progressY, dataList, offset + 1);

    progressX = (vert2.x - v0x) / (v1x - v0x);
    progressY = (vert2.y - v0y) / (v1y - v0y);

    _generateUV(progressX, progressY, dataList, offset + 2);
  }

  function _generateUV(progressX, progressY, data, offset) {
    var uvs = _uvs;
    var px1 = uvs[0] + (uvs[2] - uvs[0]) * progressX;
    var px2 = uvs[4] + (uvs[6] - uvs[4]) * progressX;
    var py1 = uvs[1] + (uvs[3] - uvs[1]) * progressX;
    var py2 = uvs[5] + (uvs[7] - uvs[5]) * progressX;
    var uv = data[offset];
    uv.u = px1 + (px2 - px1) * progressY;
    uv.v = py1 + (py2 - py1) * progressY;
  }
  /**
   * radialFilled 组装器
   * 可通过 `UI.radialFilled` 获取该组装器。
   */


  var radialFilled = {
    useModel: false,
    createData: function createData(sprite) {
      return sprite.requestRenderData();
    },
    updateRenderData: function updateRenderData(sprite) {
      var frame = sprite.spriteFrame; // TODO: Material API design and export from editor could affect the material activation process
      // need to update the logic here
      // if (frame) {
      //     if (!frame._original && dynamicAtlasManager) {
      //         dynamicAtlasManager.insertSpriteFrame(frame);
      //     }
      //     if (sprite._material._texture !== frame._texture) {
      //         sprite._activateMaterial();
      //     }
      // }

      var renderData = sprite.renderData;

      if (renderData && frame) {
        if (renderData.vertDirty || renderData.uvDirty) {
          var dataList = renderData.data;
          var fillStart = sprite.fillStart;
          var fillRange = sprite.fillRange;

          if (fillRange < 0) {
            fillStart += fillRange;
            fillRange = -fillRange;
          } // do round fill start [0,1), include 0, exclude 1


          while (fillStart >= 1.0) {
            fillStart -= 1.0;
          }

          while (fillStart < 0.0) {
            fillStart += 1.0;
          }

          fillStart *= PI_2;
          fillRange *= PI_2;
          var fillEnd = fillStart + fillRange; // build vertices

          _calculateVertices(sprite); // build uvs


          _calculateUVs(frame);

          _calcIntersectedPoints(_vertices[0], _vertices[2], _vertices[1], _vertices[3], _center, fillStart, _intersectPoint_1);

          _calcIntersectedPoints(_vertices[0], _vertices[2], _vertices[1], _vertices[3], _center, fillStart + fillRange, _intersectPoint_2);

          var offset = 0;

          for (var triangleIndex = 0; triangleIndex < 4; ++triangleIndex) {
            var triangle = _triangles[triangleIndex];

            if (!triangle) {
              continue;
            } // all in


            if (fillRange >= PI_2) {
              renderData.dataLength = offset + 3;

              _generateTriangle(dataList, offset, _center, _vertPos[triangle.x], _vertPos[triangle.y]);

              offset += 3;
              continue;
            } // test against


            var startAngle = _getVertAngle(_center, _vertPos[triangle.x]);

            var endAngle = _getVertAngle(_center, _vertPos[triangle.y]);

            if (endAngle < startAngle) {
              endAngle += PI_2;
            }

            startAngle -= PI_2;
            endAngle -= PI_2; // testing

            for (var testIndex = 0; testIndex < 3; ++testIndex) {
              if (startAngle >= fillEnd) {// all out
              } else if (startAngle >= fillStart) {
                renderData.dataLength = offset + 3;

                if (endAngle >= fillEnd) {
                  // startAngle to fillEnd
                  _generateTriangle(dataList, offset, _center, _vertPos[triangle.x], _intersectPoint_2[triangleIndex]);
                } else {
                  // startAngle to endAngle
                  _generateTriangle(dataList, offset, _center, _vertPos[triangle.x], _vertPos[triangle.y]);
                }

                offset += 3;
              } else {
                // startAngle < fillStart
                if (endAngle <= fillStart) {// all out
                } else if (endAngle <= fillEnd) {
                  renderData.dataLength = offset + 3; // fillStart to endAngle

                  _generateTriangle(dataList, offset, _center, _intersectPoint_1[triangleIndex], _vertPos[triangle.y]);

                  offset += 3;
                } else {
                  renderData.dataLength = offset + 3; // fillStart to fillEnd

                  _generateTriangle(dataList, offset, _center, _intersectPoint_1[triangleIndex], _intersectPoint_2[triangleIndex]);

                  offset += 3;
                }
              } // add 2 * PI


              startAngle += PI_2;
              endAngle += PI_2;
            }
          }

          renderData.indicesCount = renderData.vertexCount = offset;
          renderData.vertDirty = renderData.uvDirty = false;
        }
      }
    },
    fillBuffers: function fillBuffers(comp, renderer) {
      var node = comp.node;
      var renderData = comp.renderData;
      (0, _utils.fillVertices3D)(node, renderer, renderData, comp.color);
    }
  };
  _exports.radialFilled = radialFilled;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImU6L2QwMDQ1MjUyMC9HaXRodWIvZW5naW5lL2NvY29zL3VpL2Fzc2VtYmxlci9zcHJpdGUvcmFkaWFsLWZpbGxlZC50cyJdLCJuYW1lcyI6WyJQSV8yIiwiTWF0aCIsIlBJIiwiRVBTSUxPTiIsIl92ZXJ0UG9zIiwiVmVjMiIsIl92ZXJ0aWNlcyIsIkFycmF5IiwiX3V2cyIsIl9pbnRlcnNlY3RQb2ludF8xIiwiX2ludGVyc2VjdFBvaW50XzIiLCJfY2VudGVyIiwiX3RyaWFuZ2xlcyIsIl9jYWxjSW50ZXJzZWN0ZWRQb2ludHMiLCJsZWZ0IiwicmlnaHQiLCJib3R0b20iLCJ0b3AiLCJjZW50ZXIiLCJhbmdsZSIsImludGVyc2VjdFBvaW50cyIsInNpbkFuZ2xlIiwic2luIiwiYWJzIiwiY29zQW5nbGUiLCJjb3MiLCJ0YW5BbmdsZSIsImNvdEFuZ2xlIiwieCIsInlMZWZ0IiwieSIsInlSaWdodCIsInhUb3AiLCJ4Qm90dG9tIiwiX2NhbGN1bGF0ZVZlcnRpY2VzIiwic3ByaXRlIiwidWlUcmFucyIsIm5vZGUiLCJfdWlQcm9wcyIsInVpVHJhbnNmb3JtQ29tcCIsIndpZHRoIiwiaGVpZ2h0IiwiYXBwWCIsImFuY2hvclgiLCJhcHBZIiwiYW5jaG9yWSIsImwiLCJiIiwiciIsInQiLCJ2ZXJ0aWNlcyIsImZpbGxDZW50ZXIiLCJjeCIsIm1pbiIsIm1heCIsImN5IiwibnVtIiwic2V0IiwiX2NhbGN1bGF0ZVVWcyIsInNwcml0ZUZyYW1lIiwiYXRsYXNXaWR0aCIsImF0bGFzSGVpZ2h0IiwidGV4dHVyZVJlY3QiLCJnZXRSZWN0IiwidTAiLCJ1MSIsInYwIiwidjEiLCJ1dnMiLCJpc1JvdGF0ZWQiLCJfZ2V0VmVydEFuZ2xlIiwic3RhcnQiLCJlbmQiLCJwbGFjZW1lbnRYIiwicGxhY2VtZW50WSIsImF0YW4iLCJfZ2VuZXJhdGVUcmlhbmdsZSIsImRhdGFMaXN0Iiwib2Zmc2V0IiwidmVydDAiLCJ2ZXJ0MSIsInZlcnQyIiwidjB4IiwidjB5IiwidjF4IiwidjF5IiwicHJvZ3Jlc3NYIiwicHJvZ3Jlc3NZIiwiX2dlbmVyYXRlVVYiLCJkYXRhIiwicHgxIiwicHgyIiwicHkxIiwicHkyIiwidXYiLCJ1IiwidiIsInJhZGlhbEZpbGxlZCIsInVzZU1vZGVsIiwiY3JlYXRlRGF0YSIsInJlcXVlc3RSZW5kZXJEYXRhIiwidXBkYXRlUmVuZGVyRGF0YSIsImZyYW1lIiwicmVuZGVyRGF0YSIsInZlcnREaXJ0eSIsInV2RGlydHkiLCJmaWxsU3RhcnQiLCJmaWxsUmFuZ2UiLCJmaWxsRW5kIiwidHJpYW5nbGVJbmRleCIsInRyaWFuZ2xlIiwiZGF0YUxlbmd0aCIsInN0YXJ0QW5nbGUiLCJlbmRBbmdsZSIsInRlc3RJbmRleCIsImluZGljZXNDb3VudCIsInZlcnRleENvdW50IiwiZmlsbEJ1ZmZlcnMiLCJjb21wIiwicmVuZGVyZXIiLCJjb2xvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQ0EsTUFBTUEsSUFBSSxHQUFHQyxJQUFJLENBQUNDLEVBQUwsR0FBVSxDQUF2QjtBQUNBLE1BQU1DLE9BQU8sR0FBRyxJQUFoQjtBQUVBLE1BQU1DLFFBQWdCLEdBQUcsQ0FBQyxJQUFJQyxXQUFKLEVBQUQsRUFBYSxJQUFJQSxXQUFKLEVBQWIsRUFBeUIsSUFBSUEsV0FBSixFQUF6QixFQUFxQyxJQUFJQSxXQUFKLEVBQXJDLENBQXpCOztBQUNBLE1BQU1DLFNBQW1CLEdBQUcsSUFBSUMsS0FBSixDQUFVLENBQVYsQ0FBNUI7O0FBQ0EsTUFBTUMsSUFBYyxHQUFHLElBQUlELEtBQUosQ0FBVSxDQUFWLENBQXZCOztBQUNBLE1BQU1FLGlCQUF5QixHQUFHLENBQUMsSUFBSUosV0FBSixFQUFELEVBQWEsSUFBSUEsV0FBSixFQUFiLEVBQXlCLElBQUlBLFdBQUosRUFBekIsRUFBcUMsSUFBSUEsV0FBSixFQUFyQyxDQUFsQztBQUNBLE1BQU1LLGlCQUF5QixHQUFHLENBQUMsSUFBSUwsV0FBSixFQUFELEVBQWEsSUFBSUEsV0FBSixF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O0FBQ0h5QixrQkFBQUEsVUFBVSxDQUFDUSxVQUFYLEdBQXdCakMsTUFBTSxHQUFHLENBQWpDLENBREcsQ0FFSDs7QUFDQUYsa0JBQUFBLGlCQUFpQixDQUFDQyxRQUFELEVBQVdDLE1BQVgsRUFBbUJuRSxPQUFuQixFQUNiRixpQkFBaUIsQ0FBQ29HLGFBQUQsQ0FESixFQUVibkcsaUJBQWlCLENBQUNtRyxhQUFELENBRkosQ0FBakI7O0FBSUEvQixrQkFBQUEsTUFBTSxJQUFJLENBQVY7QUFDSDtBQUNKLGVBeEMrQyxDQXlDaEQ7OztBQUNBa0MsY0FBQUEsVUFBVSxJQUFJaEgsSUFBZDtBQUNBaUgsY0FBQUEsUUFBUSxJQUFJakgsSUFBWjtBQUNIO0FBQ0o7O0FBRUR1RyxVQUFBQSxVQUFVLENBQUNZLFlBQVgsR0FBMEJaLFVBQVUsQ0FBQ2EsV0FBWCxHQUF5QnRDLE1BQW5EO0FBQ0F5QixVQUFBQSxVQUFVLENBQUNDLFNBQVgsR0FBdUJELFVBQVUsQ0FBQ0UsT0FBWCxHQUFxQixLQUE1QztBQUNIO0FBQ0o7QUFDSixLQWhJbUM7QUFrSXBDWSxJQUFBQSxXQWxJb0MsdUJBa0l2QkMsSUFsSXVCLEVBa0lUQyxRQWxJUyxFQWtJSztBQUNyQyxVQUFNbEYsSUFBSSxHQUFHaUYsSUFBSSxDQUFDakYsSUFBbEI7QUFDQSxVQUFNa0UsVUFBc0IsR0FBR2UsSUFBSSxDQUFDZixVQUFwQztBQUNBLGlDQUFlbEUsSUFBZixFQUFxQmtGLFFBQXJCLEVBQStCaEIsVUFBL0IsRUFBMkNlLElBQUksQ0FBQ0UsS0FBaEQ7QUFDSDtBQXRJbUMsR0FBakMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gQ29weXJpZ2h0IChjKSAyMDE3LTIwMTggWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuXHJcblxyXG4gaHR0cHM6Ly93d3cuY29jb3MuY29tL1xyXG5cclxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxyXG4gd29ybGR3aWRlLCByb3lhbHR5LWZyZWUsIG5vbi1hc3NpZ25hYmxlLCByZXZvY2FibGUgYW5kIG5vbi1leGNsdXNpdmUgbGljZW5zZVxyXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcclxuIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcclxuIHVzZWQgZm9yIGRldmVsb3BpbmcgZ2FtZXMuIFlvdSBhcmUgbm90IGdyYW50ZWQgdG8gcHVibGlzaCwgZGlzdHJpYnV0ZSxcclxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxyXG5cclxuIFRoZSBzb2Z0d2FyZSBvciB0b29scyBpbiB0aGlzIExpY2Vuc2UgQWdyZWVtZW50IGFyZSBsaWNlbnNlZCwgbm90IHNvbGQuXHJcbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxyXG5cclxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gVEhFIFNPRlRXQVJFLlxyXG4qL1xyXG5cclxuLyoqXHJcbiAqIEBjYXRlZ29yeSB1aS1hc3NlbWJsZXJcclxuICovXHJcblxyXG5pbXBvcnQgeyBTcHJpdGVGcmFtZSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvYXNzZXRzJztcclxuaW1wb3J0IHsgVmVjMiB9IGZyb20gJy4uLy4uLy4uL2NvcmUvbWF0aCc7XHJcbmltcG9ydCB7IElSZW5kZXJEYXRhLCBSZW5kZXJEYXRhIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9yZW5kZXJlci91aS9yZW5kZXItZGF0YSc7XHJcbmltcG9ydCB7IFVJIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9yZW5kZXJlci91aS91aSc7XHJcbmltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMnO1xyXG5pbXBvcnQgeyBJQXNzZW1ibGVyIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9yZW5kZXJlci91aS9iYXNlJztcclxuaW1wb3J0IHsgZmlsbFZlcnRpY2VzM0QgfSBmcm9tICcuLi91dGlscyc7XHJcblxyXG5jb25zdCBQSV8yID0gTWF0aC5QSSAqIDI7XHJcbmNvbnN0IEVQU0lMT04gPSAxZS02O1xyXG5cclxuY29uc3QgX3ZlcnRQb3M6IFZlYzJbXSA9IFtuZXcgVmVjMigpLCBuZXcgVmVjMigpLCBuZXcgVmVjMigpLCBuZXcgVmVjMigpXTtcclxuY29uc3QgX3ZlcnRpY2VzOiBudW1iZXJbXSA9IG5ldyBBcnJheSg0KTtcclxuY29uc3QgX3V2czogbnVtYmVyW10gPSBuZXcgQXJyYXkoOCk7XHJcbmNvbnN0IF9pbnRlcnNlY3RQb2ludF8xOiBWZWMyW10gPSBbbmV3IFZlYzIoKSwgbmV3IFZlYzIoKSwgbmV3IFZlYzIoKSwgbmV3IFZlYzIoKV07XHJcbmNvbnN0IF9pbnRlcnNlY3RQb2ludF8yOiBWZWMyW10gPSBbbmV3IFZlYzIoKSwgbmV3IFZlYzIoKSwgbmV3IFZlYzIoKSwgbmV3IFZlYzIoKV07XHJcbmNvbnN0IF9jZW50ZXIgPSBuZXcgVmVjMigpO1xyXG5jb25zdCBfdHJpYW5nbGVzOiBWZWMyW10gPSBbbmV3IFZlYzIoKSwgbmV3IFZlYzIoKSwgbmV3IFZlYzIoKSwgbmV3IFZlYzIoKV07XHJcblxyXG5mdW5jdGlvbiBfY2FsY0ludGVyc2VjdGVkUG9pbnRzIChsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIGNlbnRlciwgYW5nbGUsIGludGVyc2VjdFBvaW50cykge1xyXG4gICAgLy8gbGVmdCBib3R0b20sIHJpZ2h0LCB0b3BcclxuICAgIGxldCBzaW5BbmdsZSA9IE1hdGguc2luKGFuZ2xlKTtcclxuICAgIHNpbkFuZ2xlID0gTWF0aC5hYnMoc2luQW5nbGUpID4gRVBTSUxPTiA/IHNpbkFuZ2xlIDogMDtcclxuICAgIGxldCBjb3NBbmdsZSA9IE1hdGguY29zKGFuZ2xlKTtcclxuICAgIGNvc0FuZ2xlID0gTWF0aC5hYnMoY29zQW5nbGUpID4gRVBTSUxPTiA/IGNvc0FuZ2xlIDogMDtcclxuICAgIGxldCB0YW5BbmdsZSA9IDA7XHJcbiAgICBsZXQgY290QW5nbGUgPSAwO1xyXG4gICAgaWYgKGNvc0FuZ2xlICE9PSAwKSB7XHJcbiAgICAgICAgdGFuQW5nbGUgPSBzaW5BbmdsZSAvIGNvc0FuZ2xlO1xyXG4gICAgICAgIC8vIGNhbGN1bGF0ZSByaWdodCBhbmQgbGVmdFxyXG4gICAgICAgIGlmICgobGVmdCAtIGNlbnRlci54KSAqIGNvc0FuZ2xlID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCB5TGVmdCA9IGNlbnRlci55ICsgdGFuQW5nbGUgKiAobGVmdCAtIGNlbnRlci54KTtcclxuICAgICAgICAgICAgaW50ZXJzZWN0UG9pbnRzWzBdLnggPSBsZWZ0O1xyXG4gICAgICAgICAgICBpbnRlcnNlY3RQb2ludHNbMF0ueSA9IHlMZWZ0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHJpZ2h0IC0gY2VudGVyLngpICogY29zQW5nbGUgPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHlSaWdodCA9IGNlbnRlci55ICsgdGFuQW5nbGUgKiAocmlnaHQgLSBjZW50ZXIueCk7XHJcblxyXG4gICAgICAgICAgICBpbnRlcnNlY3RQb2ludHNbMl0ueCA9IHJpZ2h0O1xyXG4gICAgICAgICAgICBpbnRlcnNlY3RQb2ludHNbMl0ueSA9IHlSaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGlmIChzaW5BbmdsZSAhPT0gMCkge1xyXG4gICAgICAgIGNvdEFuZ2xlID0gY29zQW5nbGUgLyBzaW5BbmdsZTtcclxuICAgICAgICAvLyBjYWxjdWxhdGUgIHRvcCBhbmQgYm90dG9tXHJcbiAgICAgICAgaWYgKCh0b3AgLSBjZW50ZXIueSkgKiBzaW5BbmdsZSA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgeFRvcCA9IGNlbnRlci54ICsgY290QW5nbGUgKiAodG9wIC0gY2VudGVyLnkpO1xyXG4gICAgICAgICAgICBpbnRlcnNlY3RQb2ludHNbM10ueCA9IHhUb3A7XHJcbiAgICAgICAgICAgIGludGVyc2VjdFBvaW50c1szXS55ID0gdG9wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKGJvdHRvbSAtIGNlbnRlci55KSAqIHNpbkFuZ2xlID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCB4Qm90dG9tID0gY2VudGVyLnggKyBjb3RBbmdsZSAqIChib3R0b20gLSBjZW50ZXIueSk7XHJcbiAgICAgICAgICAgIGludGVyc2VjdFBvaW50c1sxXS54ID0geEJvdHRvbTtcclxuICAgICAgICAgICAgaW50ZXJzZWN0UG9pbnRzWzFdLnkgPSBib3R0b207XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gX2NhbGN1bGF0ZVZlcnRpY2VzIChzcHJpdGU6IFNwcml0ZSkge1xyXG4gICAgY29uc3QgdWlUcmFucyA9IHNwcml0ZS5ub2RlLl91aVByb3BzLnVpVHJhbnNmb3JtQ29tcCE7XHJcbiAgICBjb25zdCB3aWR0aCA9IHVpVHJhbnMud2lkdGg7XHJcbiAgICBjb25zdCBoZWlnaHQgPSB1aVRyYW5zLmhlaWdodDtcclxuICAgIGNvbnN0IGFwcFggPSB1aVRyYW5zLmFuY2hvclggKiB3aWR0aDtcclxuICAgIGNvbnN0IGFwcFkgPSB1aVRyYW5zLmFuY2hvclkgKiBoZWlnaHQ7XHJcblxyXG4gICAgY29uc3QgbCA9IC1hcHBYO1xyXG4gICAgY29uc3QgYiA9IC1hcHBZO1xyXG4gICAgY29uc3QgciA9IHdpZHRoIC0gYXBwWDtcclxuICAgIGNvbnN0IHQgPSBoZWlnaHQgLSBhcHBZO1xyXG5cclxuICAgIGNvbnN0IHZlcnRpY2VzID0gX3ZlcnRpY2VzO1xyXG4gICAgdmVydGljZXNbMF0gPSBsO1xyXG4gICAgdmVydGljZXNbMV0gPSBiO1xyXG4gICAgdmVydGljZXNbMl0gPSByO1xyXG4gICAgdmVydGljZXNbM10gPSB0O1xyXG5cclxuICAgIGNvbnN0IGZpbGxDZW50ZXIgPSBzcHJpdGUuZmlsbENlbnRlcjtcclxuICAgIGNvbnN0IGN4ID0gX2NlbnRlci54ID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgZmlsbENlbnRlci54KSwgMSkgKiAociAtIGwpICsgbDtcclxuICAgIGNvbnN0IGN5ID0gX2NlbnRlci55ID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgZmlsbENlbnRlci55KSwgMSkgKiAodCAtIGIpICsgYjtcclxuXHJcbiAgICBfdmVydFBvc1swXS54ID0gX3ZlcnRQb3NbM10ueCA9IGw7XHJcbiAgICBfdmVydFBvc1sxXS54ID0gX3ZlcnRQb3NbMl0ueCA9IHI7XHJcbiAgICBfdmVydFBvc1swXS55ID0gX3ZlcnRQb3NbMV0ueSA9IGI7XHJcbiAgICBfdmVydFBvc1syXS55ID0gX3ZlcnRQb3NbM10ueSA9IHQ7XHJcblxyXG4gICAgZm9yIChjb25zdCBudW0gb2YgX3RyaWFuZ2xlcykge1xyXG4gICAgICAgIFZlYzIuc2V0KG51bSwgMCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGN4ICE9PSB2ZXJ0aWNlc1swXSkge1xyXG4gICAgICAgIFZlYzIuc2V0KF90cmlhbmdsZXNbMF0sIDMsIDApO1xyXG4gICAgfVxyXG4gICAgaWYgKGN4ICE9PSB2ZXJ0aWNlc1syXSkge1xyXG4gICAgICAgIFZlYzIuc2V0KF90cmlhbmdsZXNbMl0sIDEsIDIpO1xyXG4gICAgfVxyXG4gICAgaWYgKGN5ICE9PSB2ZXJ0aWNlc1sxXSkge1xyXG4gICAgICAgIFZlYzIuc2V0KF90cmlhbmdsZXNbMV0sIDAsIDEpO1xyXG4gICAgfVxyXG4gICAgaWYgKGN5ICE9PSB2ZXJ0aWNlc1szXSkge1xyXG4gICAgICAgIFZlYzIuc2V0KF90cmlhbmdsZXNbM10sIDIsIDMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBfY2FsY3VsYXRlVVZzIChzcHJpdGVGcmFtZTogU3ByaXRlRnJhbWUpIHtcclxuICAgIGNvbnN0IGF0bGFzV2lkdGggPSBzcHJpdGVGcmFtZS53aWR0aDtcclxuICAgIGNvbnN0IGF0bGFzSGVpZ2h0ID0gc3ByaXRlRnJhbWUuaGVpZ2h0O1xyXG4gICAgY29uc3QgdGV4dHVyZVJlY3QgPSBzcHJpdGVGcmFtZS5nZXRSZWN0KCk7XHJcblxyXG4gICAgbGV0IHUwID0gMDtcclxuICAgIGxldCB1MSA9IDA7XHJcbiAgICBsZXQgdjAgPSAwO1xyXG4gICAgbGV0IHYxID0gMDtcclxuICAgIGNvbnN0IHV2cyA9IF91dnM7XHJcblxyXG4gICAgaWYgKHNwcml0ZUZyYW1lLmlzUm90YXRlZCgpKSB7XHJcbiAgICAgICAgdTAgPSAodGV4dHVyZVJlY3QueCkgLyBhdGxhc1dpZHRoO1xyXG4gICAgICAgIHUxID0gKHRleHR1cmVSZWN0LnggKyB0ZXh0dXJlUmVjdC5oZWlnaHQpIC8gYXRsYXNXaWR0aDtcclxuXHJcbiAgICAgICAgdjAgPSAodGV4dHVyZVJlY3QueSkgLyBhdGxhc0hlaWdodDtcclxuICAgICAgICB2MSA9ICh0ZXh0dXJlUmVjdC55ICsgdGV4dHVyZVJlY3Qud2lkdGgpIC8gYXRsYXNIZWlnaHQ7XHJcblxyXG4gICAgICAgIHV2c1swXSA9IHV2c1syXSA9IHUwO1xyXG4gICAgICAgIHV2c1s0XSA9IHV2c1s2XSA9IHUxO1xyXG4gICAgICAgIHV2c1szXSA9IHV2c1s3XSA9IHYxO1xyXG4gICAgICAgIHV2c1sxXSA9IHV2c1s1XSA9IHYwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB1MCA9ICh0ZXh0dXJlUmVjdC54KSAvIGF0bGFzV2lkdGg7XHJcbiAgICAgICAgdTEgPSAodGV4dHVyZVJlY3QueCArIHRleHR1cmVSZWN0LndpZHRoKSAvIGF0bGFzV2lkdGg7XHJcblxyXG4gICAgICAgIHYwID0gKHRleHR1cmVSZWN0LnkpIC8gYXRsYXNIZWlnaHQ7XHJcbiAgICAgICAgdjEgPSAodGV4dHVyZVJlY3QueSArIHRleHR1cmVSZWN0LmhlaWdodCkgLyBhdGxhc0hlaWdodDtcclxuXHJcbiAgICAgICAgdXZzWzBdID0gdXZzWzRdID0gdTA7XHJcbiAgICAgICAgdXZzWzJdID0gdXZzWzZdID0gdTE7XHJcbiAgICAgICAgdXZzWzFdID0gdXZzWzNdID0gdjE7XHJcbiAgICAgICAgdXZzWzVdID0gdXZzWzddID0gdjA7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9nZXRWZXJ0QW5nbGUgKHN0YXJ0OiBWZWMyLCBlbmQ6IFZlYzIpIHtcclxuICAgIGNvbnN0IHBsYWNlbWVudFggPSBlbmQueCAtIHN0YXJ0Lng7XHJcbiAgICBjb25zdCBwbGFjZW1lbnRZID0gZW5kLnkgLSBzdGFydC55O1xyXG5cclxuICAgIGlmIChwbGFjZW1lbnRYID09PSAwICYmIHBsYWNlbWVudFkgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH0gZWxzZSBpZiAocGxhY2VtZW50WCA9PT0gMCkge1xyXG4gICAgICAgIGlmIChwbGFjZW1lbnRZID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5QSSAqIDAuNTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5QSSAqIDEuNTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBhbmdsZSA9IE1hdGguYXRhbihwbGFjZW1lbnRZIC8gcGxhY2VtZW50WCk7XHJcbiAgICAgICAgaWYgKHBsYWNlbWVudFggPCAwKSB7XHJcbiAgICAgICAgICAgIGFuZ2xlICs9IE1hdGguUEk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYW5nbGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9nZW5lcmF0ZVRyaWFuZ2xlIChkYXRhTGlzdDogSVJlbmRlckRhdGFbXSwgb2Zmc2V0OiBudW1iZXIsIHZlcnQwOiBWZWMyLCB2ZXJ0MTogVmVjMiwgdmVydDI6IFZlYzIpIHtcclxuICAgIGNvbnN0IHZlcnRpY2VzID0gX3ZlcnRpY2VzO1xyXG4gICAgY29uc3QgdjB4ID0gdmVydGljZXNbMF07XHJcbiAgICBjb25zdCB2MHkgPSB2ZXJ0aWNlc1sxXTtcclxuICAgIGNvbnN0IHYxeCA9IHZlcnRpY2VzWzJdO1xyXG4gICAgY29uc3QgdjF5ID0gdmVydGljZXNbM107XHJcblxyXG4gICAgZGF0YUxpc3Rbb2Zmc2V0XS54ID0gdmVydDAueDtcclxuICAgIGRhdGFMaXN0W29mZnNldF0ueSA9IHZlcnQwLnk7XHJcbiAgICBkYXRhTGlzdFtvZmZzZXQgKyAxXS54ID0gdmVydDEueDtcclxuICAgIGRhdGFMaXN0W29mZnNldCArIDFdLnkgPSB2ZXJ0MS55O1xyXG4gICAgZGF0YUxpc3Rbb2Zmc2V0ICsgMl0ueCA9IHZlcnQyLng7XHJcbiAgICBkYXRhTGlzdFtvZmZzZXQgKyAyXS55ID0gdmVydDIueTtcclxuXHJcbiAgICBsZXQgcHJvZ3Jlc3NYID0gMDtcclxuICAgIGxldCBwcm9ncmVzc1kgPSAwO1xyXG4gICAgcHJvZ3Jlc3NYID0gKHZlcnQwLnggLSB2MHgpIC8gKHYxeCAtIHYweCk7XHJcbiAgICBwcm9ncmVzc1kgPSAodmVydDAueSAtIHYweSkgLyAodjF5IC0gdjB5KTtcclxuICAgIF9nZW5lcmF0ZVVWKHByb2dyZXNzWCwgcHJvZ3Jlc3NZLCBkYXRhTGlzdCwgb2Zmc2V0KTtcclxuXHJcbiAgICBwcm9ncmVzc1ggPSAodmVydDEueCAtIHYweCkgLyAodjF4IC0gdjB4KTtcclxuICAgIHByb2dyZXNzWSA9ICh2ZXJ0MS55IC0gdjB5KSAvICh2MXkgLSB2MHkpO1xyXG4gICAgX2dlbmVyYXRlVVYocHJvZ3Jlc3NYLCBwcm9ncmVzc1ksIGRhdGFMaXN0LCBvZmZzZXQgKyAxKTtcclxuXHJcbiAgICBwcm9ncmVzc1ggPSAodmVydDIueCAtIHYweCkgLyAodjF4IC0gdjB4KTtcclxuICAgIHByb2dyZXNzWSA9ICh2ZXJ0Mi55IC0gdjB5KSAvICh2MXkgLSB2MHkpO1xyXG4gICAgX2dlbmVyYXRlVVYocHJvZ3Jlc3NYLCBwcm9ncmVzc1ksIGRhdGFMaXN0LCBvZmZzZXQgKyAyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2dlbmVyYXRlVVYgKHByb2dyZXNzWDogbnVtYmVyLCBwcm9ncmVzc1k6IG51bWJlciwgZGF0YTogSVJlbmRlckRhdGFbXSwgb2Zmc2V0OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IHV2cyA9IF91dnM7XHJcbiAgICBjb25zdCBweDEgPSB1dnNbMF0gKyAodXZzWzJdIC0gdXZzWzBdKSAqIHByb2dyZXNzWDtcclxuICAgIGNvbnN0IHB4MiA9IHV2c1s0XSArICh1dnNbNl0gLSB1dnNbNF0pICogcHJvZ3Jlc3NYO1xyXG4gICAgY29uc3QgcHkxID0gdXZzWzFdICsgKHV2c1szXSAtIHV2c1sxXSkgKiBwcm9ncmVzc1g7XHJcbiAgICBjb25zdCBweTIgPSB1dnNbNV0gKyAodXZzWzddIC0gdXZzWzVdKSAqIHByb2dyZXNzWDtcclxuICAgIGNvbnN0IHV2ID0gZGF0YVtvZmZzZXRdO1xyXG4gICAgdXYudSA9IHB4MSArIChweDIgLSBweDEpICogcHJvZ3Jlc3NZO1xyXG4gICAgdXYudiA9IHB5MSArIChweTIgLSBweTEpICogcHJvZ3Jlc3NZO1xyXG59XHJcblxyXG4vKipcclxuICogcmFkaWFsRmlsbGVkIOe7hOijheWZqFxyXG4gKiDlj6/pgJrov4cgYFVJLnJhZGlhbEZpbGxlZGAg6I635Y+W6K+l57uE6KOF5Zmo44CCXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmFkaWFsRmlsbGVkOiBJQXNzZW1ibGVyID0ge1xyXG4gICAgdXNlTW9kZWw6IGZhbHNlLFxyXG5cclxuICAgIGNyZWF0ZURhdGEgKHNwcml0ZTogU3ByaXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNwcml0ZS5yZXF1ZXN0UmVuZGVyRGF0YSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVSZW5kZXJEYXRhIChzcHJpdGU6IFNwcml0ZSkge1xyXG4gICAgICAgIGNvbnN0IGZyYW1lID0gc3ByaXRlLnNwcml0ZUZyYW1lO1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBNYXRlcmlhbCBBUEkgZGVzaWduIGFuZCBleHBvcnQgZnJvbSBlZGl0b3IgY291bGQgYWZmZWN0IHRoZSBtYXRlcmlhbCBhY3RpdmF0aW9uIHByb2Nlc3NcclxuICAgICAgICAvLyBuZWVkIHRvIHVwZGF0ZSB0aGUgbG9naWMgaGVyZVxyXG4gICAgICAgIC8vIGlmIChmcmFtZSkge1xyXG4gICAgICAgIC8vICAgICBpZiAoIWZyYW1lLl9vcmlnaW5hbCAmJiBkeW5hbWljQXRsYXNNYW5hZ2VyKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBkeW5hbWljQXRsYXNNYW5hZ2VyLmluc2VydFNwcml0ZUZyYW1lKGZyYW1lKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICBpZiAoc3ByaXRlLl9tYXRlcmlhbC5fdGV4dHVyZSAhPT0gZnJhbWUuX3RleHR1cmUpIHtcclxuICAgICAgICAvLyAgICAgICAgIHNwcml0ZS5fYWN0aXZhdGVNYXRlcmlhbCgpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBjb25zdCByZW5kZXJEYXRhID0gc3ByaXRlLnJlbmRlckRhdGE7XHJcbiAgICAgICAgaWYgKHJlbmRlckRhdGEgJiYgZnJhbWUpIHtcclxuICAgICAgICAgICAgaWYgKHJlbmRlckRhdGEudmVydERpcnR5IHx8IHJlbmRlckRhdGEudXZEaXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUxpc3QgPSByZW5kZXJEYXRhLmRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGZpbGxTdGFydCA9IHNwcml0ZS5maWxsU3RhcnQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsbFJhbmdlID0gc3ByaXRlLmZpbGxSYW5nZTtcclxuICAgICAgICAgICAgICAgIGlmIChmaWxsUmFuZ2UgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbFN0YXJ0ICs9IGZpbGxSYW5nZTtcclxuICAgICAgICAgICAgICAgICAgICBmaWxsUmFuZ2UgPSAtZmlsbFJhbmdlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGRvIHJvdW5kIGZpbGwgc3RhcnQgWzAsMSksIGluY2x1ZGUgMCwgZXhjbHVkZSAxXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoZmlsbFN0YXJ0ID49IDEuMCkgeyBmaWxsU3RhcnQgLT0gMS4wOyB9XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoZmlsbFN0YXJ0IDwgMC4wKSB7IGZpbGxTdGFydCArPSAxLjA7IH1cclxuXHJcbiAgICAgICAgICAgICAgICBmaWxsU3RhcnQgKj0gUElfMjtcclxuICAgICAgICAgICAgICAgIGZpbGxSYW5nZSAqPSBQSV8yO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsbEVuZCA9IGZpbGxTdGFydCArIGZpbGxSYW5nZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBidWlsZCB2ZXJ0aWNlc1xyXG4gICAgICAgICAgICAgICAgX2NhbGN1bGF0ZVZlcnRpY2VzKHNwcml0ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBidWlsZCB1dnNcclxuICAgICAgICAgICAgICAgIF9jYWxjdWxhdGVVVnMoZnJhbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIF9jYWxjSW50ZXJzZWN0ZWRQb2ludHMoXHJcbiAgICAgICAgICAgICAgICAgICAgX3ZlcnRpY2VzWzBdLCBfdmVydGljZXNbMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgX3ZlcnRpY2VzWzFdLCBfdmVydGljZXNbM10sXHJcbiAgICAgICAgICAgICAgICAgICAgX2NlbnRlciwgZmlsbFN0YXJ0LCBfaW50ZXJzZWN0UG9pbnRfMSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBfY2FsY0ludGVyc2VjdGVkUG9pbnRzKFxyXG4gICAgICAgICAgICAgICAgICAgIF92ZXJ0aWNlc1swXSwgX3ZlcnRpY2VzWzJdLFxyXG4gICAgICAgICAgICAgICAgICAgIF92ZXJ0aWNlc1sxXSwgX3ZlcnRpY2VzWzNdLFxyXG4gICAgICAgICAgICAgICAgICAgIF9jZW50ZXIsIGZpbGxTdGFydCArIGZpbGxSYW5nZSwgX2ludGVyc2VjdFBvaW50XzIsXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdHJpYW5nbGVJbmRleCA9IDA7IHRyaWFuZ2xlSW5kZXggPCA0OyArK3RyaWFuZ2xlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmlhbmdsZSA9IF90cmlhbmdsZXNbdHJpYW5nbGVJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0cmlhbmdsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsIGluXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGxSYW5nZSA+PSBQSV8yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckRhdGEuZGF0YUxlbmd0aCA9IG9mZnNldCArIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nZW5lcmF0ZVRyaWFuZ2xlKGRhdGFMaXN0LCBvZmZzZXQsIF9jZW50ZXIsIF92ZXJ0UG9zW3RyaWFuZ2xlLnhdLCBfdmVydFBvc1t0cmlhbmdsZS55XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGVzdCBhZ2FpbnN0XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0QW5nbGUgPSBfZ2V0VmVydEFuZ2xlKF9jZW50ZXIsIF92ZXJ0UG9zW3RyaWFuZ2xlLnhdKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kQW5nbGUgPSBfZ2V0VmVydEFuZ2xlKF9jZW50ZXIsIF92ZXJ0UG9zW3RyaWFuZ2xlLnldKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kQW5nbGUgPCBzdGFydEFuZ2xlKSB7IGVuZEFuZ2xlICs9IFBJXzI7IH1cclxuICAgICAgICAgICAgICAgICAgICBzdGFydEFuZ2xlIC09IFBJXzI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kQW5nbGUgLT0gUElfMjtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0ZXN0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdGVzdEluZGV4ID0gMDsgdGVzdEluZGV4IDwgMzsgKyt0ZXN0SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0QW5nbGUgPj0gZmlsbEVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxsIG91dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0QW5nbGUgPj0gZmlsbFN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJEYXRhLmRhdGFMZW5ndGggPSBvZmZzZXQgKyAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZEFuZ2xlID49IGZpbGxFbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydEFuZ2xlIHRvIGZpbGxFbmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2VuZXJhdGVUcmlhbmdsZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUxpc3QsIG9mZnNldCwgX2NlbnRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZlcnRQb3NbdHJpYW5nbGUueF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pbnRlcnNlY3RQb2ludF8yW3RyaWFuZ2xlSW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0QW5nbGUgdG8gZW5kQW5nbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2VuZXJhdGVUcmlhbmdsZShkYXRhTGlzdCwgb2Zmc2V0LCBfY2VudGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdmVydFBvc1t0cmlhbmdsZS54XSwgX3ZlcnRQb3NbdHJpYW5nbGUueV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnRBbmdsZSA8IGZpbGxTdGFydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZEFuZ2xlIDw9IGZpbGxTdGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbCBvdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kQW5nbGUgPD0gZmlsbEVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckRhdGEuZGF0YUxlbmd0aCA9IG9mZnNldCArIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlsbFN0YXJ0IHRvIGVuZEFuZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dlbmVyYXRlVHJpYW5nbGUoZGF0YUxpc3QsIG9mZnNldCwgX2NlbnRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ludGVyc2VjdFBvaW50XzFbdHJpYW5nbGVJbmRleF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92ZXJ0UG9zW3RyaWFuZ2xlLnldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckRhdGEuZGF0YUxlbmd0aCA9IG9mZnNldCArIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlsbFN0YXJ0IHRvIGZpbGxFbmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2VuZXJhdGVUcmlhbmdsZShkYXRhTGlzdCwgb2Zmc2V0LCBfY2VudGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaW50ZXJzZWN0UG9pbnRfMVt0cmlhbmdsZUluZGV4XSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ludGVyc2VjdFBvaW50XzJbdHJpYW5nbGVJbmRleF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgMiAqIFBJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QW5nbGUgKz0gUElfMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kQW5nbGUgKz0gUElfMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVuZGVyRGF0YS5pbmRpY2VzQ291bnQgPSByZW5kZXJEYXRhLnZlcnRleENvdW50ID0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyRGF0YS52ZXJ0RGlydHkgPSByZW5kZXJEYXRhLnV2RGlydHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgZmlsbEJ1ZmZlcnMgKGNvbXA6IFNwcml0ZSwgcmVuZGVyZXI6IFVJKSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IGNvbXAubm9kZTtcclxuICAgICAgICBjb25zdCByZW5kZXJEYXRhOiBSZW5kZXJEYXRhID0gY29tcC5yZW5kZXJEYXRhITtcclxuICAgICAgICBmaWxsVmVydGljZXMzRChub2RlLCByZW5kZXJlciwgcmVuZGVyRGF0YSwgY29tcC5jb2xvcik7XHJcbiAgICB9LFxyXG59O1xyXG4iXX0=