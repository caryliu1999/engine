(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "../../../core/math/index.js"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("../../../core/math/index.js"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.index);
    global.tiled = mod.exports;
  }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports, _index) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.tilled = void 0;

  /*
   Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.
  
   http://www.cocos.com
  
   Permission is hereby granted, free of charge, to any person obtaining a copy
   of this software and associated engine source code (the "Software"), a limited,
   worldwide, royalty-free, non-assignable, revocable and non-exclusive license
   to use Cocos Creator solely to develop games on your target platforms. You shall
   not use Cocos Creator software for developing other software or tools that's
   used for developing games. You are not granted to publish, distribute,
   sublicense, and/or sell copies of Cocos Creator.
  
   The software or tools in this License Agreement are licensed, not sold.
   Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.
  
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   THE SOFTWARE.
  */

  /**
   * @hidden
   */
  var vec3_temps = [];

  for (var i = 0; i < 4; i++) {
    vec3_temps.push(new _index.Vec3());
  }

  var _perVertexLength = 9;
  var tilled = {
    useModel: false,
    createData: function createData(sprite) {
      return sprite.requestRenderData();
    },
    updateRenderData: function updateRenderData(sprite) {
      var renderData = sprite.renderData;
      var frame = sprite.spriteFrame;

      if (!frame || !renderData || !(renderData.uvDirty || renderData.vertDirty)) {
        return;
      }

      var uiTrans = sprite.node._uiProps.uiTransformComp;
      var contentWidth = Math.abs(uiTrans.width);
      var contentHeight = Math.abs(uiTrans.height);
      var rect = frame.getRect();
      var leftWidth = frame.insetLeft,
          rightWidth = frame.insetRight,
          centerWidth = rect.width - leftWidth - rightWidth,
          topHeight = frame.insetTop,
          bottomHeight = frame.insetBottom,
          centerHeight = rect.height - topHeight - bottomHeight;
      this.sizableWidth = contentWidth - leftWidth - rightWidth;
      this.sizableHeight = contentHeight - topHeight - bottomHeight;
      this.sizableWidth = this.sizableWidth > 0 ? this.sizableWidth : 0;
      this.sizableHeight = this.sizableHeight > 0 ? this.sizableHeight : 0;
      this.hRepeat = centerWidth === 0 ? this.sizableWidth : this.sizableWidth / centerWidth;
      this.vRepeat = centerHeight === 0 ? this.sizableHeight : this.sizableHeight / centerHeight;
      this.row = Math.ceil(this.hRepeat + 2);
      this.col = Math.ceil(this.vRepeat + 2);
      renderData.dataLength = Math.max(8, this.row + 1, this.col + 1);
      this.updateVerts(sprite); // update data property

      renderData.vertexCount = this.row * this.col * 4;
      renderData.indicesCount = this.row * this.col * 6;
      renderData.uvDirty = false;
      renderData.vertDirty = false;
    },
    fillBuffers: function fillBuffers(sprite, renderer) {
      var _sprite$spriteFrame;

      var node = sprite.node;
      var renderData = sprite.renderData; // buffer

      var buffer = renderer.currBufferBatch; // buffer data may be realloc, need get reference after request.

      var indicesOffset = buffer.indicesOffset;
      var vertexOffset = buffer.byteOffset >> 2;
      var vertexId = buffer.vertexOffset;
      var vertexCount = renderData.vertexCount;
      var indicesCount = renderData.indicesCount;
      var vBuf = buffer.vData;
      var iBuf = buffer.iData;
      var isRecreate = buffer.request(vertexCount, indicesCount);

      if (!isRecreate) {
        buffer = renderer.currBufferBatch;
        vertexOffset = 0;
        indicesOffset = 0;
        vertexId = 0;
      }

      var frame = sprite.spriteFrame;
      var rotated = frame.isRotated();
      var uv = frame.uv;
      var uvSliced = (_sprite$spriteFrame = sprite.spriteFrame) === null || _sprite$spriteFrame === void 0 ? void 0 : _sprite$spriteFrame.uvSliced;
      var rect = frame.getRect();
      var leftWidth = frame.insetLeft,
          rightWidth = frame.insetRight,
          centerWidth = rect.width - leftWidth - rightWidth,
          topHeight = frame.insetTop,
          bottomHeight = frame.insetBottom,
          centerHeight = rect.height - topHeight - bottomHeight;
      var matrix = node.worldMatrix;
      this.fillVertices(vBuf, vertexOffset, matrix, this.row, this.col, renderData.data);
      var offset = _perVertexLength;
      var offset1 = offset;
      var offset2 = offset * 2;
      var offset3 = offset * 3;
      var offset4 = offset * 4;
      var coefU = 0;
      var coefV = 0;

      for (var yIndex = 0, yLength = this.row; yIndex < yLength; ++yIndex) {
        if (this.sizableHeight > centerHeight) {
          if (this.sizableHeight >= yIndex * centerHeight) {
            coefV = 1;
          } else {
            coefV = this.vRepeat % 1;
          }
        } else {
          coefV = this.vRepeat;
        }

        for (var xIndex = 0, xLength = this.col; xIndex < xLength; ++xIndex) {
          if (this.sizableWidth > centerWidth) {
            if (this.sizableWidth >= xIndex * centerWidth) {
              coefU = 1;
            } else {
              coefU = this.hRepeat % 1;
            }
          } else {
            coefU = this.hRepeat;
          }

          var vertexOffsetU = vertexOffset + 3;
          var vertexOffsetV = vertexOffsetU + 1; // UV

          if (rotated) {
            // lb
            vBuf[vertexOffsetU] = uv[0];
            vBuf[vertexOffsetV] = uv[1]; // rb

            vBuf[vertexOffsetU + offset1] = uv[0];
            vBuf[vertexOffsetV + offset1] = uv[1] + (uv[7] - uv[1]) * coefU; // lt

            vBuf[vertexOffsetU + offset2] = uv[0] + (uv[6] - uv[0]) * coefV;
            vBuf[vertexOffsetV + offset2] = uv[1]; // rt

            vBuf[vertexOffsetU + offset3] = vBuf[vertexOffsetU + offset2];
            vBuf[vertexOffsetV + offset3] = vBuf[vertexOffsetV + offset1];
          } else {
            // lb
            if (xIndex === 0) {
              vBuf[vertexOffsetU] = uv[0];
            } else if (xIndex > 0 && xIndex < this.col - 1) {
              vBuf[vertexOffsetU] = uvSliced[1].u;
            } else if (xIndex === this.col - 1) {
              vBuf[vertexOffsetU] = uvSliced[2].u;
            }

            if (yIndex === 0) {
              vBuf[vertexOffsetV] = uvSliced[0].v;
            } else if (yIndex > 0 && yIndex < this.row - 1) {
              vBuf[vertexOffsetV] = uvSliced[4].v;
            } else if (yIndex === this.row - 1) {
              vBuf[vertexOffsetV] = uvSliced[8].v;
            } // rb


            if (xIndex === 0) {
              vBuf[vertexOffsetU + offset1] = uvSliced[1].u + (uvSliced[2].u - uvSliced[1].u) * coefU;
            } else if (xIndex > 0 && xIndex < this.col - 1) {
              vBuf[vertexOffsetU + offset1] = uvSliced[1].u + (uvSliced[2].u - uvSliced[1].u) * coefU;
            } else if (xIndex === this.col - 1) {
              vBuf[vertexOffsetU + offset1] = uvSliced[3].u;
            }

            if (yIndex === 0) {
              vBuf[vertexOffsetV + offset1] = uvSliced[0].v;
            } else if (yIndex > 0 && yIndex < this.row - 1) {
              vBuf[vertexOffsetV + offset1] = uvSliced[4].v;
            } else if (yIndex === this.row - 1) {
              vBuf[vertexOffsetV + offset1] = uvSliced[8].v;
            } // lt


            if (xIndex === 0) {
              vBuf[vertexOffsetU + offset2] = uv[0];
            } else if (xIndex > 0 && xIndex < this.col - 1) {
              vBuf[vertexOffsetU + offset2] = uvSliced[1].u;
            } else if (xIndex === this.col - 1) {
              vBuf[vertexOffsetU + offset2] = uvSliced[2].u;
            }

            if (yIndex === 0) {
              vBuf[vertexOffsetV + offset2] = uvSliced[4].v + (uvSliced[8].v - uvSliced[4].v) * coefV;
            } else if (yIndex > 0 && yIndex < this.row - 1) {
              vBuf[vertexOffsetV + offset2] = uvSliced[4].v + (uvSliced[8].v - uvSliced[4].v) * coefV;
            } else if (yIndex === this.row - 1) {
              vBuf[vertexOffsetV + offset2] = uvSliced[12].v;
            } // rt


            vBuf[vertexOffsetU + offset3] = vBuf[vertexOffsetU + offset1];
            vBuf[vertexOffsetV + offset3] = vBuf[vertexOffsetV + offset2];
          } // color


          _index.Color.toArray(vBuf, sprite.color, vertexOffsetV + 1);

          _index.Color.toArray(vBuf, sprite.color, vertexOffsetV + offset1 + 1);

          _index.Color.toArray(vBuf, sprite.color, vertexOffsetV + offset2 + 1);

          _index.Color.toArray(vBuf, sprite.color, vertexOffsetV + offset3 + 1);

          vertexOffset += offset4;
        }
      } // update indices


      for (var _i = 0; _i < indicesCount; _i += 6) {
        iBuf[indicesOffset++] = vertexId;
        iBuf[indicesOffset++] = vertexId + 1;
        iBuf[indicesOffset++] = vertexId + 2;
        iBuf[indicesOffset++] = vertexId + 1;
        iBuf[indicesOffset++] = vertexId + 3;
        iBuf[indicesOffset++] = vertexId + 2;
        vertexId += 4;
      }
    },
    fillVertices: function fillVertices(vBuf, vertexOffset, matrix, row, col, dataList) {
      var x = 0;
      var x1 = 0;
      var y = 0;
      var y1 = 0;

      for (var yIndex = 0, yLength = row; yIndex < yLength; ++yIndex) {
        y = dataList[yIndex].y;
        y1 = dataList[yIndex + 1].y;

        for (var xIndex = 0, xLength = col; xIndex < xLength; ++xIndex) {
          x = dataList[xIndex].x;
          x1 = dataList[xIndex + 1].x;

          _index.Vec3.set(vec3_temps[0], x, y, 0);

          _index.Vec3.set(vec3_temps[1], x1, y, 0);

          _index.Vec3.set(vec3_temps[2], x, y1, 0);

          _index.Vec3.set(vec3_temps[3], x1, y1, 0);

          for (var _i2 = 0; _i2 < 4; _i2++) {
            var vec3_temp = vec3_temps[_i2];

            _index.Vec3.transformMat4(vec3_temp, vec3_temp, matrix);

            var offset = _i2 * _perVertexLength;
            vBuf[vertexOffset + offset] = vec3_temp.x;
            vBuf[vertexOffset + offset + 1] = vec3_temp.y;
            vBuf[vertexOffset + offset + 2] = vec3_temp.z;
          }

          vertexOffset += 36;
        }
      }
    },
    updateVerts: function updateVerts(sprite) {
      var _sprite$renderData;

      var uiTrans = sprite.node._uiProps.uiTransformComp;
      var data = (_sprite$renderData = sprite.renderData) === null || _sprite$renderData === void 0 ? void 0 : _sprite$renderData.data;
      var frame = sprite.spriteFrame;
      var rect = frame.getRect();
      var contentWidth = Math.abs(uiTrans.width);
      var contentHeight = Math.abs(uiTrans.height);
      var appx = uiTrans.anchorX * contentWidth;
      var appy = uiTrans.anchorY * contentHeight;
      var leftWidth = frame.insetLeft,
          rightWidth = frame.insetRight,
          centerWidth = rect.width - leftWidth - rightWidth,
          topHeight = frame.insetTop,
          bottomHeight = frame.insetBottom,
          centerHeight = rect.height - topHeight - bottomHeight;
      var xScale = uiTrans.width / (leftWidth + rightWidth) > 1 ? 1 : uiTrans.width / (leftWidth + rightWidth);
      var yScale = uiTrans.height / (topHeight + bottomHeight) > 1 ? 1 : uiTrans.height / (topHeight + bottomHeight);
      var offsetWidth = 0,
          offsetHeight = 0;

      if (centerWidth > 0) {
        /*
         * Because the float numerical calculation in javascript is not accurate enough,
         * there is an expected result of 1.0, but the actual result is 1.000001.
         */
        offsetWidth = Math.floor(this.sizableWidth * 1000) / 1000 % centerWidth === 0 ? centerWidth : this.sizableWidth % centerWidth;
      } else {
        offsetWidth = this.sizableWidth;
      }

      if (centerHeight > 0) {
        offsetHeight = Math.floor(this.sizableHeight * 1000) / 1000 % centerHeight === 0 ? centerHeight : this.sizableHeight % centerHeight;
      } else {
        offsetHeight = this.sizableHeight;
      }

      for (var _i3 = 0; _i3 <= this.col; _i3++) {
        if (_i3 === 0) {
          data[_i3].x = -appx;
        } else if (_i3 > 0 && _i3 < this.col) {
          if (_i3 === 1) {
            data[_i3].x = leftWidth * xScale + Math.min(centerWidth, this.sizableWidth) - appx;
          } else {
            if (centerWidth > 0) {
              if (_i3 === this.col - 1) {
                data[_i3].x = leftWidth + offsetWidth + centerWidth * (_i3 - 2) - appx;
              } else {
                data[_i3].x = leftWidth + Math.min(centerWidth, this.sizableWidth) + centerWidth * (_i3 - 2) - appx;
              }
            } else {
              data[_i3].x = leftWidth + this.sizableWidth - appx;
            }
          }
        } else if (_i3 === this.col) {
          data[_i3].x = Math.min(leftWidth + this.sizableWidth + rightWidth, contentWidth) - appx;
        }
      }

      for (var _i4 = 0; _i4 <= this.row; _i4++) {
        if (_i4 === 0) {
          data[_i4].y = -appy;
        } else if (_i4 > 0 && _i4 < this.row) {
          if (_i4 === 1) {
            data[_i4].y = bottomHeight * yScale + Math.min(centerHeight, this.sizableHeight) - appy;
          } else {
            if (centerHeight > 0) {
              if (_i4 === this.row - 1) {
                data[_i4].y = bottomHeight + offsetHeight + (_i4 - 2) * centerHeight - appy;
              } else {
                data[_i4].y = bottomHeight + Math.min(centerHeight, this.sizableHeight) + (_i4 - 2) * centerHeight - appy;
              }
            } else {
              data[_i4].y = bottomHeight + this.sizableHeight - appy;
            }
          }
        } else if (_i4 === this.row) {
          data[_i4].y = Math.min(bottomHeight + this.sizableHeight + topHeight, contentHeight) - appy;
        }
      }
    }
  };
  _exports.tilled = tilled;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImU6L2QwMDQ1MjUyMC9HaXRodWIvZW5naW5lL2NvY29zL3VpL2Fzc2VtYmxlci9zcHJpdGUvdGlsZWQudHMiXSwibmFtZXMiOlsidmVjM190ZW1wcyIsImkiLCJwdXNoIiwiVmVjMyIsIl9wZXJWZXJ0ZXhMZW5ndGgiLCJ0aWxsZWQiLCJ1c2VNb2RlbCIsImNyZWF0ZURhdGEiLCJzcHJpdGUiLCJyZXF1ZXN0UmVuZGVyRGF0YSIsInVwZGF0ZVJlbmRlckRhdGEiLCJyZW5kZXJEYXRhIiwiZnJhbWUiLCJzcHJpdGVGcmFtZSIsInV2RGlydHkiLCJ2ZXJ0RGlydHkiLCJ1aVRyYW5zIiwibm9kZSIsIl91aVByb3BzIiwidWlUcmFuc2Zvcm1Db21wIiwiY29udGVudFdpZHRoIiwiTWF0aCIsImFicyIsIndpZHRoIiwiY29udGVudEhlaWdodCIsImhlaWdodCIsInJlY3QiLCJnZXRSZWN0IiwibGVmdFdpZHRoIiwiaW5zZXRMZWZ0IiwicmlnaHRXaWR0aCIsImluc2V0UmlnaHQiLCJjZW50ZXJXaWR0aCIsInRvcEhlaWdodCIsImluc2V0VG9wIiwiYm90dG9tSGVpZ2h0IiwiaW5zZXRCb3R0b20iLCJjZW50ZXJIZWlnaHQiLCJzaXphYmxlV2lkdGgiLCJzaXphYmxlSGVpZ2h0IiwiaFJlcGVhdCIsInZSZXBlYXQiLCJyb3ciLCJjZWlsIiwiY29sIiwiZGF0YUxlbmd0aCIsIm1heCIsInVwZGF0ZVZlcnRzIiwidmVydGV4Q291bnQiLCJpbmRpY2VzQ291bnQiLCJmaWxsQnVmZmVycyIsInJlbmRlcmVyIiwiYnVmZmVyIiwiY3VyckJ1ZmZlckJhdGNoIiwiaW5kaWNlc09mZnNldCIsInZlcnRleE9mZnNldCIsImJ5dGVPZmZzZXQiLCJ2ZXJ0ZXhJZCIsInZCdWYiLCJ2RGF0YSIsImlCdWYiLCJpRGF0YSIsImlzUmVjcmVhdGUiLCJyZXF1ZXN0Iiwicm90YXRlZCIsImlzUm90YXRlZCIsInV2IiwidXZTbGljZWQiLCJtYXRyaXgiLCJ3b3JsZE1hdHJpeCIsImZpbGxWZXJ0aWNlcyIsImRhdGEiLCJvZmZzZXQiLCJvZmZzZXQxIiwib2Zmc2V0MiIsIm9mZnNldDMiLCJvZmZzZXQ0IiwiY29lZlUiLCJjb2VmViIsInlJbmRleCIsInlMZW5ndGgiLCJ4SW5kZXgiLCJ4TGVuZ3RoIiwidmVydGV4T2Zmc2V0VSIsInZlcnRleE9mZnNldFYiLCJ1IiwidiIsIkNvbG9yIiwidG9BcnJheSIsImNvbG9yIiwiZGF0YUxpc3QiLCJ4IiwieDEiLCJ5IiwieTEiLCJzZXQiLCJ2ZWMzX3RlbXAiLCJ0cmFuc2Zvcm1NYXQ0IiwieiIsImFwcHgiLCJhbmNob3JYIiwiYXBweSIsImFuY2hvclkiLCJ4U2NhbGUiLCJ5U2NhbGUiLCJvZmZzZXRXaWR0aCIsIm9mZnNldEhlaWdodCIsImZsb29yIiwibWluIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUJBOzs7QUFXQSxNQUFNQSxVQUFrQixHQUFHLEVBQTNCOztBQUNBLE9BQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRyxDQUFwQixFQUF1QkEsQ0FBQyxFQUF4QixFQUE0QjtBQUN4QkQsSUFBQUEsVUFBVSxDQUFDRSxJQUFYLENBQWdCLElBQUlDLFdBQUosRUFBaEI7QUFDSDs7QUFFRCxNQUFNQyxnQkFBZ0IsR0FBRyxDQUF6QjtBQUVPLE1BQU1DLE1BQWtCLEdBQUc7QUFDOUJDLElBQUFBLFFBQVEsRUFBRSxLQURvQjtBQUc5QkMsSUFBQUEsVUFIOEIsc0JBR2xCQyxNQUhrQixFQUdJO0FBQzlCLGFBQU9BLE1BQU0sQ0FBQ0MsaUJBQVAsRUFBUDtBQUNILEtBTDZCO0FBTzlCQyxJQUFBQSxnQkFQOEIsNEJBT1pGLE1BUFksRUFPSTtBQUM5QixVQUFNRyxVQUFVLEdBQUdILE1BQU0sQ0FBQ0csVUFBMUI7QUFDQSxVQUFNQyxLQUFLLEdBQUdKLE1BQU0sQ0FBQ0ssV0FBckI7O0FBQ0EsVUFBSSxDQUFDRCxLQUFELElBQVUsQ0FBQ0QsVUFBWCxJ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QUFSLEdBQVl4RSxJQUFJLENBQUN1RixHQUFMLENBQVN6RSxZQUFZLEdBQUcsS0FBS0ksYUFBcEIsR0FBb0NOLFNBQTdDLEVBQXdEVCxhQUF4RCxJQUF5RTZFLElBQXJGO0FBQ0g7QUFDSjtBQUNKO0FBaFU2QixHQUEzQiIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cclxuXHJcbiBodHRwOi8vd3d3LmNvY29zLmNvbVxyXG5cclxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxyXG4gd29ybGR3aWRlLCByb3lhbHR5LWZyZWUsIG5vbi1hc3NpZ25hYmxlLCByZXZvY2FibGUgYW5kIG5vbi1leGNsdXNpdmUgbGljZW5zZVxyXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcclxuIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcclxuIHVzZWQgZm9yIGRldmVsb3BpbmcgZ2FtZXMuIFlvdSBhcmUgbm90IGdyYW50ZWQgdG8gcHVibGlzaCwgZGlzdHJpYnV0ZSxcclxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxyXG5cclxuIFRoZSBzb2Z0d2FyZSBvciB0b29scyBpbiB0aGlzIExpY2Vuc2UgQWdyZWVtZW50IGFyZSBsaWNlbnNlZCwgbm90IHNvbGQuXHJcbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxyXG5cclxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gVEhFIFNPRlRXQVJFLlxyXG4qL1xyXG5cclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICovXHJcblxyXG5pbXBvcnQgeyBNYXQ0LCBWZWMzLCBDb2xvciB9IGZyb20gJy4uLy4uLy4uL2NvcmUvbWF0aCc7XHJcbmltcG9ydCB7IFJlbmRlckRhdGEsIElSZW5kZXJEYXRhIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9yZW5kZXJlci91aS9yZW5kZXItZGF0YSc7XHJcbmltcG9ydCB7IFVJIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9yZW5kZXJlci91aS91aSc7XHJcbmltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvc3ByaXRlJztcclxuaW1wb3J0IHsgVUlSZW5kZXJhYmxlIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9jb21wb25lbnRzL3VpLWJhc2UvdWktcmVuZGVyYWJsZSc7XHJcbmltcG9ydCB7IElBc3NlbWJsZXIgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3JlbmRlcmVyL3VpL2Jhc2UnO1xyXG5cclxuY29uc3QgdmVjM190ZW1wczogVmVjM1tdID0gW107XHJcbmZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICB2ZWMzX3RlbXBzLnB1c2gobmV3IFZlYzMoKSk7XHJcbn1cclxuXHJcbmNvbnN0IF9wZXJWZXJ0ZXhMZW5ndGggPSA5O1xyXG5cclxuZXhwb3J0IGNvbnN0IHRpbGxlZDogSUFzc2VtYmxlciA9IHtcclxuICAgIHVzZU1vZGVsOiBmYWxzZSxcclxuXHJcbiAgICBjcmVhdGVEYXRhIChzcHJpdGU6IFVJUmVuZGVyYWJsZSkge1xyXG4gICAgICAgIHJldHVybiBzcHJpdGUucmVxdWVzdFJlbmRlckRhdGEoKSBhcyBSZW5kZXJEYXRhO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVSZW5kZXJEYXRhIChzcHJpdGU6IFNwcml0ZSkge1xyXG4gICAgICAgIGNvbnN0IHJlbmRlckRhdGEgPSBzcHJpdGUucmVuZGVyRGF0YSE7XHJcbiAgICAgICAgY29uc3QgZnJhbWUgPSBzcHJpdGUuc3ByaXRlRnJhbWUhO1xyXG4gICAgICAgIGlmICghZnJhbWUgfHwgIXJlbmRlckRhdGEgfHwgIShyZW5kZXJEYXRhLnV2RGlydHkgfHwgcmVuZGVyRGF0YS52ZXJ0RGlydHkpKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdWlUcmFucyA9IHNwcml0ZS5ub2RlLl91aVByb3BzLnVpVHJhbnNmb3JtQ29tcCE7XHJcbiAgICAgICAgY29uc3QgY29udGVudFdpZHRoID0gTWF0aC5hYnModWlUcmFucy53aWR0aCk7XHJcbiAgICAgICAgY29uc3QgY29udGVudEhlaWdodCA9IE1hdGguYWJzKHVpVHJhbnMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVjdCA9IGZyYW1lLmdldFJlY3QoKTtcclxuICAgICAgICBsZXQgbGVmdFdpZHRoID0gZnJhbWUuaW5zZXRMZWZ0LCByaWdodFdpZHRoID0gZnJhbWUuaW5zZXRSaWdodCwgY2VudGVyV2lkdGggPSByZWN0LndpZHRoIC0gbGVmdFdpZHRoIC0gcmlnaHRXaWR0aCxcclxuICAgICAgICAgICAgdG9wSGVpZ2h0ID0gZnJhbWUuaW5zZXRUb3AsIGJvdHRvbUhlaWdodCA9IGZyYW1lLmluc2V0Qm90dG9tLCBjZW50ZXJIZWlnaHQgPSByZWN0LmhlaWdodCAtIHRvcEhlaWdodCAtIGJvdHRvbUhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy5zaXphYmxlV2lkdGggPSBjb250ZW50V2lkdGggLSBsZWZ0V2lkdGggLSByaWdodFdpZHRoO1xyXG4gICAgICAgIHRoaXMuc2l6YWJsZUhlaWdodCA9IGNvbnRlbnRIZWlnaHQgLSB0b3BIZWlnaHQgLSBib3R0b21IZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5zaXphYmxlV2lkdGggPSB0aGlzLnNpemFibGVXaWR0aCA+IDAgPyB0aGlzLnNpemFibGVXaWR0aCA6IDA7XHJcbiAgICAgICAgdGhpcy5zaXphYmxlSGVpZ2h0ID0gdGhpcy5zaXphYmxlSGVpZ2h0ID4gMCA/IHRoaXMuc2l6YWJsZUhlaWdodCA6IDA7XHJcblxyXG4gICAgICAgIHRoaXMuaFJlcGVhdCA9IGNlbnRlcldpZHRoID09PSAwID8gdGhpcy5zaXphYmxlV2lkdGggOiB0aGlzLnNpemFibGVXaWR0aCAvIGNlbnRlcldpZHRoO1xyXG4gICAgICAgIHRoaXMudlJlcGVhdCA9IGNlbnRlckhlaWdodCA9PT0gMCA/IHRoaXMuc2l6YWJsZUhlaWdodCA6IHRoaXMuc2l6YWJsZUhlaWdodCAvIGNlbnRlckhlaWdodDtcclxuICAgICAgICB0aGlzLnJvdyA9IE1hdGguY2VpbCh0aGlzLmhSZXBlYXQgKyAyKTtcclxuICAgICAgICB0aGlzLmNvbCA9IE1hdGguY2VpbCh0aGlzLnZSZXBlYXQgKyAyKTtcclxuXHJcbiAgICAgICAgcmVuZGVyRGF0YS5kYXRhTGVuZ3RoID0gTWF0aC5tYXgoOCwgdGhpcy5yb3cgKyAxLCB0aGlzLmNvbCArIDEpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVZlcnRzKHNwcml0ZSk7XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBkYXRhIHByb3BlcnR5XHJcbiAgICAgICAgcmVuZGVyRGF0YS52ZXJ0ZXhDb3VudCA9IHRoaXMucm93ICogdGhpcy5jb2wgKiA0O1xyXG4gICAgICAgIHJlbmRlckRhdGEuaW5kaWNlc0NvdW50ID0gdGhpcy5yb3cgKiB0aGlzLmNvbCAqIDY7XHJcbiAgICAgICAgcmVuZGVyRGF0YS51dkRpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgcmVuZGVyRGF0YS52ZXJ0RGlydHkgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgZmlsbEJ1ZmZlcnMgKHNwcml0ZTogU3ByaXRlLCByZW5kZXJlcjogVUkpIHtcclxuICAgICAgICBjb25zdCBub2RlID0gc3ByaXRlLm5vZGU7XHJcbiAgICAgICAgY29uc3QgcmVuZGVyRGF0YSA9IHNwcml0ZS5yZW5kZXJEYXRhITtcclxuXHJcbiAgICAgICAgLy8gYnVmZmVyXHJcbiAgICAgICAgbGV0IGJ1ZmZlciA9IHJlbmRlcmVyLmN1cnJCdWZmZXJCYXRjaCE7XHJcbiAgICAgICAgLy8gYnVmZmVyIGRhdGEgbWF5IGJlIHJlYWxsb2MsIG5lZWQgZ2V0IHJlZmVyZW5jZSBhZnRlciByZXF1ZXN0LlxyXG4gICAgICAgIGxldCBpbmRpY2VzT2Zmc2V0ID0gYnVmZmVyLmluZGljZXNPZmZzZXQ7XHJcbiAgICAgICAgbGV0IHZlcnRleE9mZnNldCA9IGJ1ZmZlci5ieXRlT2Zmc2V0ID4+IDI7XHJcbiAgICAgICAgbGV0IHZlcnRleElkID0gYnVmZmVyLnZlcnRleE9mZnNldDtcclxuICAgICAgICBjb25zdCB2ZXJ0ZXhDb3VudCA9IHJlbmRlckRhdGEhLnZlcnRleENvdW50O1xyXG4gICAgICAgIGNvbnN0IGluZGljZXNDb3VudCA9IHJlbmRlckRhdGEuaW5kaWNlc0NvdW50O1xyXG4gICAgICAgIGNvbnN0IHZCdWYgPSBidWZmZXIudkRhdGEhO1xyXG4gICAgICAgIGNvbnN0IGlCdWYgPSBidWZmZXIuaURhdGEhO1xyXG5cclxuICAgICAgICBjb25zdCBpc1JlY3JlYXRlID0gYnVmZmVyLnJlcXVlc3QodmVydGV4Q291bnQsIGluZGljZXNDb3VudCk7XHJcbiAgICAgICAgaWYgKCFpc1JlY3JlYXRlKSB7XHJcbiAgICAgICAgICAgIGJ1ZmZlciA9IHJlbmRlcmVyLmN1cnJCdWZmZXJCYXRjaCE7XHJcbiAgICAgICAgICAgIHZlcnRleE9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgIGluZGljZXNPZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICB2ZXJ0ZXhJZCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmcmFtZSA9IHNwcml0ZS5zcHJpdGVGcmFtZSE7XHJcbiAgICAgICAgY29uc3Qgcm90YXRlZCA9IGZyYW1lLmlzUm90YXRlZCgpO1xyXG4gICAgICAgIGNvbnN0IHV2ID0gZnJhbWUudXY7XHJcbiAgICAgICAgY29uc3QgdXZTbGljZWQgPSBzcHJpdGUuc3ByaXRlRnJhbWU/LnV2U2xpY2VkITtcclxuICAgICAgICBjb25zdCByZWN0ID0gZnJhbWUuZ2V0UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IGxlZnRXaWR0aCA9IGZyYW1lLmluc2V0TGVmdCwgcmlnaHRXaWR0aCA9IGZyYW1lLmluc2V0UmlnaHQsIGNlbnRlcldpZHRoID0gcmVjdC53aWR0aCAtIGxlZnRXaWR0aCAtIHJpZ2h0V2lkdGgsXHJcbiAgICAgICAgICAgIHRvcEhlaWdodCA9IGZyYW1lLmluc2V0VG9wLCBib3R0b21IZWlnaHQgPSBmcmFtZS5pbnNldEJvdHRvbSwgY2VudGVySGVpZ2h0ID0gcmVjdC5oZWlnaHQgLSB0b3BIZWlnaHQgLSBib3R0b21IZWlnaHQ7XHJcblxyXG4gICAgICAgIGNvbnN0IG1hdHJpeCA9IG5vZGUud29ybGRNYXRyaXg7XHJcblxyXG4gICAgICAgIHRoaXMuZmlsbFZlcnRpY2VzKHZCdWYsIHZlcnRleE9mZnNldCwgbWF0cml4LCB0aGlzLnJvdywgdGhpcy5jb2wsIHJlbmRlckRhdGEuZGF0YSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG9mZnNldCA9IF9wZXJWZXJ0ZXhMZW5ndGg7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0MSA9IG9mZnNldDsgY29uc3Qgb2Zmc2V0MiA9IG9mZnNldCAqIDI7IGNvbnN0IG9mZnNldDMgPSBvZmZzZXQgKiAzOyBjb25zdCBvZmZzZXQ0ID0gb2Zmc2V0ICogNDtcclxuICAgICAgICBsZXQgY29lZlUgPSAwOyBsZXQgY29lZlYgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IHlJbmRleCA9IDAsIHlMZW5ndGggPSB0aGlzLnJvdzsgeUluZGV4IDwgeUxlbmd0aDsgKyt5SW5kZXgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2l6YWJsZUhlaWdodCA+IGNlbnRlckhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2l6YWJsZUhlaWdodCA+PSB5SW5kZXggKiBjZW50ZXJIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2VmViA9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2VmViA9IHRoaXMudlJlcGVhdCAlIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb2VmViA9IHRoaXMudlJlcGVhdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCB4SW5kZXggPSAwLCB4TGVuZ3RoID0gdGhpcy5jb2w7IHhJbmRleCA8IHhMZW5ndGg7ICsreEluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaXphYmxlV2lkdGggPiBjZW50ZXJXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpemFibGVXaWR0aCA+PSB4SW5kZXggKiBjZW50ZXJXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2VmVSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2VmVSA9IHRoaXMuaFJlcGVhdCAlIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29lZlUgPSB0aGlzLmhSZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmVydGV4T2Zmc2V0VSA9IHZlcnRleE9mZnNldCArIDM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJ0ZXhPZmZzZXRWID0gdmVydGV4T2Zmc2V0VSArIDE7XHJcbiAgICAgICAgICAgICAgICAvLyBVVlxyXG4gICAgICAgICAgICAgICAgaWYgKHJvdGF0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBsYlxyXG4gICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0VV0gPSB1dlswXTtcclxuICAgICAgICAgICAgICAgICAgICB2QnVmW3ZlcnRleE9mZnNldFZdID0gdXZbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmJcclxuICAgICAgICAgICAgICAgICAgICB2QnVmW3ZlcnRleE9mZnNldFUgKyBvZmZzZXQxXSA9IHV2WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0ViArIG9mZnNldDFdID0gdXZbMV0gKyAodXZbN10gLSB1dlsxXSkgKiBjb2VmVTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBsdFxyXG4gICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0VSArIG9mZnNldDJdID0gdXZbMF0gKyAodXZbNl0gLSB1dlswXSkgKiBjb2VmVjtcclxuICAgICAgICAgICAgICAgICAgICB2QnVmW3ZlcnRleE9mZnNldFYgKyBvZmZzZXQyXSA9IHV2WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJ0XHJcbiAgICAgICAgICAgICAgICAgICAgdkJ1Zlt2ZXJ0ZXhPZmZzZXRVICsgb2Zmc2V0M10gPSB2QnVmW3ZlcnRleE9mZnNldFUgKyBvZmZzZXQyXTtcclxuICAgICAgICAgICAgICAgICAgICB2QnVmW3ZlcnRleE9mZnNldFYgKyBvZmZzZXQzXSA9IHZCdWZbdmVydGV4T2Zmc2V0ViArIG9mZnNldDFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeEluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0VV0gPSB1dlswXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeEluZGV4ID4gMCAmJiB4SW5kZXggPCAodGhpcy5jb2wgLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2QnVmW3ZlcnRleE9mZnNldFVdID0gdXZTbGljZWRbMV0udTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih4SW5kZXggPT09ICh0aGlzLmNvbCAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0VV0gPSB1dlNsaWNlZFsyXS51O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeUluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0Vl0gPSB1dlNsaWNlZFswXS52O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh5SW5kZXggPiAwICYmIHlJbmRleCA8ICh0aGlzLnJvdyAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0Vl0gPSB1dlNsaWNlZFs0XS52O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh5SW5kZXggPT09ICh0aGlzLnJvdyAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0Vl0gPSB1dlNsaWNlZFs4XS52O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyByYlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4SW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdkJ1Zlt2ZXJ0ZXhPZmZzZXRVICsgb2Zmc2V0MV0gPSB1dlNsaWNlZFsxXS51ICsgKHV2U2xpY2VkWzJdLnUgLSB1dlNsaWNlZFsxXS51KSAqIGNvZWZVO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh4SW5kZXggPiAwICYmIHhJbmRleCA8ICh0aGlzLmNvbCAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0VSArIG9mZnNldDFdID0gdXZTbGljZWRbMV0udSArICh1dlNsaWNlZFsyXS51IC0gdXZTbGljZWRbMV0udSkgKiBjb2VmVTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeEluZGV4ID09PSAodGhpcy5jb2wgLSAxKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0VSArIG9mZnNldDFdID0gdXZTbGljZWRbM10udTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHlJbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2QnVmW3ZlcnRleE9mZnNldFYgKyBvZmZzZXQxXSA9IHV2U2xpY2VkWzBdLnY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHlJbmRleCA+IDAgJiYgeUluZGV4IDwgKHRoaXMucm93IC0gMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdkJ1Zlt2ZXJ0ZXhPZmZzZXRWICsgb2Zmc2V0MV0gPSB1dlNsaWNlZFs0XS52O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh5SW5kZXggPT09ICh0aGlzLnJvdyAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0ViArIG9mZnNldDFdID0gdXZTbGljZWRbOF0udjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbHRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeEluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0VSArIG9mZnNldDJdID0gdXZbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHhJbmRleCA+IDAgJiYgeEluZGV4IDwgKHRoaXMuY29sIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdkJ1Zlt2ZXJ0ZXhPZmZzZXRVICsgb2Zmc2V0Ml0gPSB1dlNsaWNlZFsxXS51O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh4SW5kZXggPT09ICh0aGlzLmNvbCAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0VSArIG9mZnNldDJdID0gdXZTbGljZWRbMl0udTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHlJbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2QnVmW3ZlcnRleE9mZnNldFYgKyBvZmZzZXQyXSA9IHV2U2xpY2VkWzRdLnYgKyAodXZTbGljZWRbOF0udiAtIHV2U2xpY2VkWzRdLnYpICogY29lZlY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHlJbmRleCA+IDAgJiYgeUluZGV4IDwgKHRoaXMucm93IC0gMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdkJ1Zlt2ZXJ0ZXhPZmZzZXRWICsgb2Zmc2V0Ml0gPSB1dlNsaWNlZFs0XS52ICsgKHV2U2xpY2VkWzhdLnYgLSB1dlNsaWNlZFs0XS52KSAqIGNvZWZWO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh5SW5kZXggPT09ICh0aGlzLnJvdyAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0ViArIG9mZnNldDJdID0gdXZTbGljZWRbMTJdLnY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJ0XHJcbiAgICAgICAgICAgICAgICAgICAgdkJ1Zlt2ZXJ0ZXhPZmZzZXRVICsgb2Zmc2V0M10gPSB2QnVmW3ZlcnRleE9mZnNldFUgKyBvZmZzZXQxXTtcclxuICAgICAgICAgICAgICAgICAgICB2QnVmW3ZlcnRleE9mZnNldFYgKyBvZmZzZXQzXSA9IHZCdWZbdmVydGV4T2Zmc2V0ViArIG9mZnNldDJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY29sb3JcclxuICAgICAgICAgICAgICAgIENvbG9yLnRvQXJyYXkodkJ1ZiEsIHNwcml0ZS5jb2xvciwgdmVydGV4T2Zmc2V0ViArIDEpO1xyXG4gICAgICAgICAgICAgICAgQ29sb3IudG9BcnJheSh2QnVmISwgc3ByaXRlLmNvbG9yLCB2ZXJ0ZXhPZmZzZXRWICsgb2Zmc2V0MSArIDEpO1xyXG4gICAgICAgICAgICAgICAgQ29sb3IudG9BcnJheSh2QnVmISwgc3ByaXRlLmNvbG9yLCB2ZXJ0ZXhPZmZzZXRWICsgb2Zmc2V0MiArIDEpO1xyXG4gICAgICAgICAgICAgICAgQ29sb3IudG9BcnJheSh2QnVmISwgc3ByaXRlLmNvbG9yLCB2ZXJ0ZXhPZmZzZXRWICsgb2Zmc2V0MyArIDEpO1xyXG4gICAgICAgICAgICAgICAgdmVydGV4T2Zmc2V0ICs9IG9mZnNldDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBpbmRpY2VzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRpY2VzQ291bnQ7IGkgKz0gNikge1xyXG4gICAgICAgICAgICBpQnVmW2luZGljZXNPZmZzZXQrK10gPSB2ZXJ0ZXhJZDtcclxuICAgICAgICAgICAgaUJ1ZltpbmRpY2VzT2Zmc2V0KytdID0gdmVydGV4SWQgKyAxO1xyXG4gICAgICAgICAgICBpQnVmW2luZGljZXNPZmZzZXQrK10gPSB2ZXJ0ZXhJZCArIDI7XHJcbiAgICAgICAgICAgIGlCdWZbaW5kaWNlc09mZnNldCsrXSA9IHZlcnRleElkICsgMTtcclxuICAgICAgICAgICAgaUJ1ZltpbmRpY2VzT2Zmc2V0KytdID0gdmVydGV4SWQgKyAzO1xyXG4gICAgICAgICAgICBpQnVmW2luZGljZXNPZmZzZXQrK10gPSB2ZXJ0ZXhJZCArIDI7XHJcbiAgICAgICAgICAgIHZlcnRleElkICs9IDQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBmaWxsVmVydGljZXMgKHZCdWY6IEZsb2F0MzJBcnJheSwgdmVydGV4T2Zmc2V0OiBudW1iZXIsIG1hdHJpeDogTWF0NCwgcm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCBkYXRhTGlzdDogSVJlbmRlckRhdGFbXSkge1xyXG4gICAgICAgIGxldCB4ID0gMDsgbGV0IHgxID0gMDsgbGV0IHkgPSAwOyBsZXQgeTEgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IHlJbmRleCA9IDAsIHlMZW5ndGggPSByb3c7IHlJbmRleCA8IHlMZW5ndGg7ICsreUluZGV4KSB7XHJcbiAgICAgICAgICAgIHkgPSBkYXRhTGlzdFt5SW5kZXhdLnk7XHJcbiAgICAgICAgICAgIHkxID0gZGF0YUxpc3RbeUluZGV4ICsgMV0ueTtcclxuICAgICAgICAgICAgZm9yIChsZXQgeEluZGV4ID0gMCwgeExlbmd0aCA9IGNvbDsgeEluZGV4IDwgeExlbmd0aDsgKyt4SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHggPSBkYXRhTGlzdFt4SW5kZXhdLng7XHJcbiAgICAgICAgICAgICAgICB4MSA9IGRhdGFMaXN0W3hJbmRleCArIDFdLng7XHJcblxyXG4gICAgICAgICAgICAgICAgVmVjMy5zZXQodmVjM190ZW1wc1swXSwgeCwgeSwgMCk7XHJcbiAgICAgICAgICAgICAgICBWZWMzLnNldCh2ZWMzX3RlbXBzWzFdLCB4MSwgeSwgMCk7XHJcbiAgICAgICAgICAgICAgICBWZWMzLnNldCh2ZWMzX3RlbXBzWzJdLCB4LCB5MSwgMCk7XHJcbiAgICAgICAgICAgICAgICBWZWMzLnNldCh2ZWMzX3RlbXBzWzNdLCB4MSwgeTEsIDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVjM190ZW1wID0gdmVjM190ZW1wc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBWZWMzLnRyYW5zZm9ybU1hdDQodmVjM190ZW1wLCB2ZWMzX3RlbXAsIG1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaSAqIF9wZXJWZXJ0ZXhMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdkJ1Zlt2ZXJ0ZXhPZmZzZXQgKyBvZmZzZXRdID0gdmVjM190ZW1wLng7XHJcbiAgICAgICAgICAgICAgICAgICAgdkJ1Zlt2ZXJ0ZXhPZmZzZXQgKyBvZmZzZXQgKyAxXSA9IHZlYzNfdGVtcC55O1xyXG4gICAgICAgICAgICAgICAgICAgIHZCdWZbdmVydGV4T2Zmc2V0ICsgb2Zmc2V0ICsgMl0gPSB2ZWMzX3RlbXAuejtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhPZmZzZXQgKz0gMzY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZVZlcnRzIChzcHJpdGU6IFNwcml0ZSkge1xyXG4gICAgICAgIGNvbnN0IHVpVHJhbnMgPSBzcHJpdGUubm9kZS5fdWlQcm9wcy51aVRyYW5zZm9ybUNvbXAhO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBzcHJpdGUucmVuZGVyRGF0YT8uZGF0YSE7XHJcbiAgICAgICAgY29uc3QgZnJhbWUgPSBzcHJpdGUuc3ByaXRlRnJhbWUhO1xyXG5cclxuICAgICAgICBjb25zdCByZWN0ID0gZnJhbWUuZ2V0UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRXaWR0aCA9IE1hdGguYWJzKHVpVHJhbnMud2lkdGgpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRIZWlnaHQgPSBNYXRoLmFicyh1aVRyYW5zLmhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgYXBweCA9IHVpVHJhbnMuYW5jaG9yWCAqIGNvbnRlbnRXaWR0aDtcclxuICAgICAgICBjb25zdCBhcHB5ID0gdWlUcmFucy5hbmNob3JZICogY29udGVudEhlaWdodDtcclxuICAgICAgICBjb25zdCBsZWZ0V2lkdGggPSBmcmFtZS5pbnNldExlZnQsIHJpZ2h0V2lkdGggPSBmcmFtZS5pbnNldFJpZ2h0LCBjZW50ZXJXaWR0aCA9IHJlY3Qud2lkdGggLSBsZWZ0V2lkdGggLSByaWdodFdpZHRoLFxyXG4gICAgICAgICAgICB0b3BIZWlnaHQgPSBmcmFtZS5pbnNldFRvcCwgYm90dG9tSGVpZ2h0ID0gZnJhbWUuaW5zZXRCb3R0b20sIGNlbnRlckhlaWdodCA9IHJlY3QuaGVpZ2h0IC0gdG9wSGVpZ2h0IC0gYm90dG9tSGVpZ2h0O1xyXG5cclxuICAgICAgICBjb25zdCB4U2NhbGUgPSAodWlUcmFucy53aWR0aCAvIChsZWZ0V2lkdGggKyByaWdodFdpZHRoKSkgPiAxID8gMSA6ICh1aVRyYW5zLndpZHRoIC8gKGxlZnRXaWR0aCArIHJpZ2h0V2lkdGgpKTtcclxuICAgICAgICBjb25zdCB5U2NhbGUgPSAodWlUcmFucy5oZWlnaHQgLyAodG9wSGVpZ2h0ICsgYm90dG9tSGVpZ2h0KSkgPiAxID8gMSA6ICh1aVRyYW5zLmhlaWdodCAvICh0b3BIZWlnaHQgKyBib3R0b21IZWlnaHQpKTtcclxuICAgICAgICBsZXQgb2Zmc2V0V2lkdGggPSAwLCBvZmZzZXRIZWlnaHQgPSAwO1xyXG5cclxuICAgICAgICBpZiAoY2VudGVyV2lkdGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAqIEJlY2F1c2UgdGhlIGZsb2F0IG51bWVyaWNhbCBjYWxjdWxhdGlvbiBpbiBqYXZhc2NyaXB0IGlzIG5vdCBhY2N1cmF0ZSBlbm91Z2gsXHJcbiAgICAgICAgICAgICAqIHRoZXJlIGlzIGFuIGV4cGVjdGVkIHJlc3VsdCBvZiAxLjAsIGJ1dCB0aGUgYWN0dWFsIHJlc3VsdCBpcyAxLjAwMDAwMS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIG9mZnNldFdpZHRoID0gTWF0aC5mbG9vcih0aGlzLnNpemFibGVXaWR0aCAqIDEwMDApIC8gMTAwMCAlIGNlbnRlcldpZHRoID09PSAwID8gY2VudGVyV2lkdGggOiB0aGlzLnNpemFibGVXaWR0aCAlIGNlbnRlcldpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2Zmc2V0V2lkdGggPSB0aGlzLnNpemFibGVXaWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNlbnRlckhlaWdodCA+IDApIHtcclxuICAgICAgICAgICAgb2Zmc2V0SGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLnNpemFibGVIZWlnaHQgKiAxMDAwKSAvIDEwMDAgJSBjZW50ZXJIZWlnaHQgPT09IDAgPyBjZW50ZXJIZWlnaHQgOiB0aGlzLnNpemFibGVIZWlnaHQgJSBjZW50ZXJIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvZmZzZXRIZWlnaHQgPSB0aGlzLnNpemFibGVIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSB0aGlzLmNvbDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2ldLnggPSAtIGFwcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaSA+IDAgJiYgaSA8IHRoaXMuY29sKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFbaV0ueCA9IGxlZnRXaWR0aCAqIHhTY2FsZSArIE1hdGgubWluKGNlbnRlcldpZHRoLCB0aGlzLnNpemFibGVXaWR0aCkgLSBhcHB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlcldpZHRoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gKHRoaXMuY29sIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbaV0ueCA9IGxlZnRXaWR0aCArIG9mZnNldFdpZHRoICsgY2VudGVyV2lkdGggKiAoaSAtIDIpIC0gYXBweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbaV0ueCA9IGxlZnRXaWR0aCArIE1hdGgubWluKGNlbnRlcldpZHRoLCB0aGlzLnNpemFibGVXaWR0aCkgKyBjZW50ZXJXaWR0aCAqIChpIC0gMikgLSBhcHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2ldLnggPSBsZWZ0V2lkdGggKyB0aGlzLnNpemFibGVXaWR0aCAtIGFwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGkgPT09IHRoaXMuY29sKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2ldLnggPSBNYXRoLm1pbihsZWZ0V2lkdGggKyB0aGlzLnNpemFibGVXaWR0aCArIHJpZ2h0V2lkdGgsIGNvbnRlbnRXaWR0aCkgLSBhcHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHRoaXMucm93OyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGRhdGFbaV0ueSA9IC0gYXBweTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpID4gMCAmJiBpIDwgdGhpcy5yb3cpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtpXS55ID0gYm90dG9tSGVpZ2h0ICogeVNjYWxlICsgTWF0aC5taW4oY2VudGVySGVpZ2h0LCB0aGlzLnNpemFibGVIZWlnaHQpIC0gYXBweTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXJIZWlnaHQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAodGhpcy5yb3cgLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtpXS55ID0gYm90dG9tSGVpZ2h0ICsgb2Zmc2V0SGVpZ2h0ICsgKGkgLSAyKSAqIGNlbnRlckhlaWdodCAtIGFwcHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2ldLnkgPSBib3R0b21IZWlnaHQgKyBNYXRoLm1pbihjZW50ZXJIZWlnaHQsIHRoaXMuc2l6YWJsZUhlaWdodCkgKyAoaSAtIDIpICogY2VudGVySGVpZ2h0IC0gYXBweTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtpXS55ID0gYm90dG9tSGVpZ2h0ICsgdGhpcy5zaXphYmxlSGVpZ2h0IC0gYXBweTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaSA9PT0gdGhpcy5yb3cpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFbaV0ueSA9IE1hdGgubWluKGJvdHRvbUhlaWdodCArIHRoaXMuc2l6YWJsZUhlaWdodCArIHRvcEhlaWdodCwgY29udGVudEhlaWdodCkgLSBhcHB5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4iXX0=